{"version":3,"sources":["views/Predictions/components/History/Header.tsx","hooks/usePersistState.ts","hooks/useWeb3.ts","hooks/useContract.ts","hooks/usePreviousValue.ts","hooks/useLastUpdated.ts","views/Predictions/hooks/useGetLatestOraclePrice.ts","views/Predictions/hooks/usePollOraclePrice.ts","views/Predictions/hooks/usePollRoundData.ts","views/Predictions/components/Container.tsx","views/Predictions/components/CollectWinningsPopup.tsx","views/Predictions/context/SwiperProvider.tsx","views/Predictions/components/TradingView.tsx","views/Predictions/components/Notification/Notification.tsx","views/Predictions/components/Notification/ErrorNotification.tsx","views/Predictions/components/Notification/PauseNotification.tsx","components/UnlockButton.tsx","utils/getTimePeriods.ts","views/Predictions/helpers.ts","views/Predictions/components/CollectRoundWinningsModal.tsx","views/Predictions/components/CollectWinningsButton.tsx","views/Predictions/components/ReclaimPositionButton.tsx","views/Predictions/components/PositionTag.tsx","views/Predictions/components/RoundResult/styles.tsx","views/Predictions/components/RoundResult/RoundResult.tsx","views/Predictions/hooks/useIsRefundable.ts","views/Predictions/components/History/BetResult.tsx","views/Predictions/components/History/BetDetails.tsx","views/Predictions/components/History/HistoricalBet.tsx","views/Predictions/components/History/RoundsTab.tsx","views/Predictions/components/History/PnlTab/PnlChartStyles.tsx","views/Predictions/components/History/PnlTab/PnlChart.tsx","views/Predictions/components/History/PnlTab/SummaryRow.tsx","views/Predictions/components/History/PnlTab/PnlTab.tsx","views/Predictions/History.tsx","views/Predictions/RoundMultiplierArrows.tsx","views/Predictions/components/RoundCard/EnteredTag.tsx","views/Predictions/components/RoundCard/MultiplierArrow.tsx","views/Predictions/components/RoundCard/Card.tsx","views/Predictions/components/RoundCard/CardHeader.tsx","views/Predictions/components/RoundCard/CollectWinningsOverlay.tsx","views/Predictions/components/RoundCard/CanceledRoundCard.tsx","views/Predictions/components/RoundCard/ExpiredRoundCard.tsx","components/BlockProgress.tsx","views/Predictions/components/RoundCard/CalculatingCard.tsx","views/Predictions/components/RoundCard/LiveRoundCard.tsx","views/Predictions/components/CardFlip.tsx","config/index.ts","views/Predictions/hooks/useSwiper.ts","views/Predictions/components/FlexRow.tsx","views/Predictions/components/RoundCard/SetPositionCard.tsx","hooks/useTokenBalance.ts","views/Predictions/components/RoundCard/OpenRoundCard.tsx","hooks/useGetBlockCountdown.ts","views/Predictions/hooks/useRoundCountdown.ts","views/Predictions/components/RoundCard/SoonRoundCard.tsx","views/Predictions/components/RoundCard/index.tsx","views/Predictions/components/Label.tsx","views/Predictions/components/PrevNextNav.tsx","views/Predictions/components/HistoryButton.tsx","views/Predictions/components/Menu.tsx","views/Predictions/hooks/useOnNextRound.ts","views/Predictions/Positions.tsx","views/Predictions/Mobile.tsx","views/Predictions/Desktop.tsx","views/Predictions/components/MobileMenu.tsx","views/Predictions/Chart.tsx","views/Predictions/components/RiskDisclaimer.tsx","views/Predictions/components/ChartDisclaimer.tsx","views/Predictions/index.tsx"],"names":["HistoryTabs","usePersistState","initialValue","localStorageKey","useState","valueFromLS","localStorage","getItem","JSON","parse","error","value","setValue","useEffect","setItem","stringify","useWeb3","library","useWeb3React","refEth","useRef","Web3","getWeb3NoAccount","web3","setweb3","current","usePredictionsContract","useMemo","getPredictionsContract","usePreviousValue","ref","useLastUpdated","Date","now","lastUpdated","setStateLastUpdated","previousLastUpdated","setLastUpdated","useCallback","useGetLatestOraclePrice","BIG_ZERO","price","setPrice","refresh","chainlinkOracleContract","getChainlinkOracleContract","useChainlinkOracleContract","a","methods","latestAnswer","call","response","getBalanceAmount","BigNumber","fetchPrice","usePollOraclePrice","seconds","dispatch","useAppDispatch","timer","setInterval","clearInterval","setLastOraclePrice","toJSON","usePollRoundData","account","getMarketData","marketData","updateMarketData","POLL_TIME_IN_SECONDS","Container","styled","div","theme","colors","gradients","violetAlt","bounceInKeyframe","keyframes","bounceOutKeyframe","bounceInAnimation","css","bounceOutAnimation","Wrapper","mediaQueries","md","Popup","secondary","CollectWinningsPopup","isOpen","setIsOpen","t","useTranslation","predictionStatus","useGetPredictionsStatus","isHistoryPaneOpen","useIsHistoryPaneOpen","isCancelled","getBetHistory","user","toLowerCase","claimed","bets","winnerBets","filter","bet","position","round","length","CSSTransition","in","unmountOnExit","nodeRef","timeout","classNames","width","style","flex","mr","onClick","setHistoryPaneState","variant","color","SwiperContext","createContext","undefined","SwiperProvider","children","swiper","setSwiper","Provider","destroySwiper","destroy","tradingViewListener","Promise","resolve","Object","defineProperty","window","configurable","set","this","tv","initializeTradingView","TradingViewObj","localeCode","widget","autosize","height","symbol","interval","timezone","isDark","locale","toolbar_bg","enable_publishing","allow_symbol_change","container_id","TradingView","currentLanguage","useTheme","code","then","overflow","className","id","CardWrapper","BunnyDecoration","Notification","title","src","alt","mb","ErrorNotification","as","PauseNotification","UnlockButton","props","useAuth","login","logout","onPresentConnectModal","useWalletModal","getTimePeriods","delta","Math","abs","timeLeft","years","months","days","hours","minutes","floor","getBnbAmount","bnbBn","formatUsd","usd","formatNumber","formatBnb","bnb","toLocaleString","minimumFractionDigits","maximumFractionDigits","padTime","num","toString","padStart","formatRoundTime","secondsBetweenBlocks","minutesSeconds","getMultiplier","total","amount","getPayout","bullAmount","bearAmount","totalAmount","multiplier","BetPosition","BULL","getBubbleGumBackground","Modal","ModalContainer","CollectRoundWinningsModal","payout","roundId","epoch","onDismiss","onSuccess","isPendingTx","setIsPendingTx","useToast","toastSuccess","toastError","predictionsContract","minWidth","mt","p","mx","alignItems","justifyContent","textAlign","claim","send","from","once","result","markBetAsCollected","transactionHash","href","message","console","isLoading","endIcon","spin","CollectWinningsButton","hasClaimed","useModal","onPresentCollectWinningsModal","disabled","ReclaimPositionButton","StyledTag","Flex","bg","Tag","startIcon","icon","borderRadius","py","px","cursor","textTransform","ml","PositionTag","betPosition","isUpPosition","Row","PrizePoolRow","bold","getPrizePoolAmount","PayoutRow","positionLabel","formattedMultiplier","fontSize","lineHeight","LockPriceRow","lockPrice","Background","Box","isNext","isLive","hasEntered","success","BEAR","failure","borderColor","StyledRoundResultBox","card","background","RoundResultBox","RoundResult","closePrice","isPositionUp","priceDifference","failed","useIsRefundable","isRefundable","setIsRefundable","claimable","refundable","fetchRefundableStatus","StyledBetResult","textDisabled","BetResult","canClaim","useBetCanClaim","Result","WIN","getHeaderColor","LOSE","CANCELED","handleSuccess","fetchBet","getHeaderText","getHeaderIcon","getResultColor","StyledBetDetails","dropdown","BetDetails","bullMultiplier","bearMultiplier","LIVE","lockBlock","external","endBlock","StyledBet","attrs","YourResult","HistoricalBet","currentEpoch","useGetCurrentEpoch","status","roundResult","getRoundResult","resultTextColor","getRoundColor","resultTextPrefix","isOpenRound","isLiveRound","PredictionStatus","role","scale","Filter","label","StyledHeader","ButtonMenuContainer","getClaimParam","historyFilter","HistoryFilter","COLLECTED","UNCOLLECTED","ALL","Header","activeTab","setActiveTab","useGetHistoryFilter","isFetchingHistory","useGetIsFetchingHistory","handleChange","newFilter","fetchHistory","setHistoryFilter","switchTab","tabIndex","size","activeIndex","onItemClick","ROUNDS","checked","onChange","RoundsTab","hasBetHistory","orderBy","map","key","DrawAnimation","OffsetAnimation","offset","SVG","svg","DefaultSlice","circle","LostSlice","WonSlice","Info","PnlChart","lost","won","percentageWon","toFixed","paintLost","paintWon","viewBox","r","cx","cy","small","summaryTypeColors","entered","summaryTypeSigns","SummaryRow","type","summary","bnbBusdPrice","rounds","roundsInPercents","typeTranslationKey","charAt","toUpperCase","slice","displayAmount","flexDirection","toLocaleLowerCase","times","toNumber","Divider","backgroundDisabled","initialPnlSummary","bestRound","getPnlSummary","reduce","rawPayout","getNetPayout","PnlTab","usePriceBnbBusd","netResultAmount","netResultIsPositive","avgPositionEntered","avgBnbWonPerRound","avgBnbWonIsPositive","hasBestRound","pb","pl","StyledHistory","BetWrapper","SpinnerWrapper","History","useGetHistoryByAccount","results","getUnclaimedWinningBets","activeTabComponent","PNL","RoundMultiplierDownArrow","isActive","fill","d","x","y","filterUnits","colorInterpolationFilters","floodOpacity","mode","in2","values","stdDeviation","operator","k2","k3","RoundMultiplierUpArrow","StyledEnteredTag","EnteredTag","useTooltip","whiteSpace","placement","targetRef","tooltipVisible","tooltip","ArrowWrapper","Content","EnteredTagWrapper","getTextColor","fallback","isDisabled","MultiplierArrow","betAmount","upColor","downColor","textColor","multiplierText","getEnteredTag","bottom","right","top","left","Card","UIKitCard","getTextColorByStatus","StyledCardHeader","cardHeader","warning","getBackgroundColor","Round","CardHeader","isBottom","CollectWinningsOverlay","CanceledRoundCard","useGetTotalIntervalBlocks","estimatedEndBlock","startBlock","blockNumber","my","StyledExpiredRoundCard","ExpiredRoundCard","hasEnteredUp","hasEnteredDown","useGetBetByRoundId","BlockProgress","rawProgress","useBlock","currentBlock","progress","primaryStep","CalculatingCard","GradientBorder","GradientCard","LiveRoundCard","totalInterval","useGetIntervalBlocks","useGetLastOraclePrice","isBull","gt","priceColor","minus","useCountUp","start","end","duration","decimals","countUp","update","minHeight","Front","Back","Inner","isFlipped","StyledCardFlip","CardFlip","Error","getComponents","front","back","config","EXPONENTIAL_AT","DECIMAL_PLACES","DEFAULT_TOKEN_DECIMAL","BIG_TEN","pow","useSwiper","swiperContext","useContext","FlexRow","dust","percentShortcuts","SetPositionCard","percentage","togglePosition","onBack","isTxPending","setIsTxPending","errorMessage","setErrorMessage","bnbBalance","balance","setBalance","eth","getBalance","walletBalance","fetchBalance","useGetBnbBalance","minBetAmount","useGetMinBetAmount","balanceDisplay","maxBalance","valueAsBn","percentageOfMaxBalance","percentageDisplay","Number","isNaN","showFieldWarning","minBetAmountBalance","eq","lt","getButtonProps","bnValue","lte","data","token","onMouseOver","keyboard","disable","mousewheel","detachEvents","onMouseOut","enable","attachEvents","onUserInput","input","isWarning","inputProps","name","min","max","onValueChanged","newValue","step","valueLabel","percent","betMethod","decimalValue","getDecimalAmount","errorMsg","OpenRoundCard","isSettingPosition","state","setState","isBufferPhase","positionDisplay","estimatedLockBlock","canEnterPosition","handleBack","prevState","handleSetPosition","newPosition","hash","markPositionAsEntered","useBlockCountdown","secondsRemaining","setSecondsRemaining","getBlockNumber","prevSecondsRemaining","startCountdown","useRoundCountdown","intervalsToAdd","currentRoundBlockNum","useGetCurrentRoundBlockNumber","blocksToAdd","SoonRoundCard","countdown","RoundCard","Token","lg","Title","Text","Price","Interval","Label","dir","PricePairLabel","display","TimerLabel","pr","StyledPrevNextNav","Icon","PrevNextNav","useGetSortedRounds","slidePrev","currentEpochIndex","findIndex","slideTo","slideNext","HistoryButton","SetCol","HelpButtonWrapper","TimerLabelWrapper","HistoryButtonWrapper","Menu","target","rel","useOnNextRound","previousEpoch","fetchCurrentBets","roundIds","SwiperCore","use","Keyboard","Mousewheel","PageView","StyledSwiper","Positions","initialIndex","initialSlide","onSwiper","spaceBetween","slidesPerView","freeMode","freeModeSticky","centeredSlides","resizeObserver","ExpandChartButton","Button","text","SplitWrapper","ChartPane","HistoryPane","StyledDesktop","PositionPane","Gutter","textSubtle","Desktop","splitWrapperRef","chartRef","gutterRef","isChartPaneOpen","useIsChartPaneOpen","handleDrag","debounce","getBoundingClientRect","setChartPaneState","split","Split","dragInterval","snapOffset","onDrag","rowGutters","track","element","newChartPaneState","transition","gridTemplateRows","delay","ERROR","PAUSED","ButtonNav","TabNav","StyledMobileMenu","MobileMenu","isHistoryOpen","isChartOpen","getActiveIndex","index","MenuWrapper","ChartWrapper","Chart","StyledMobile","xl","View","isVisible","Mobile","view","HISTORY","CHART","POSITIONS","getView","GradientModalHeader","ModalHeader","bubblegum","RiskDisclaimer","acknowledgeRisk","setAcknowledgeRisk","acknowledgeBeta","setAcknowledgeBeta","maxWidth","maxHeight","overflowY","htmlFor","marginBottom","ChartDisclaimer","Predictions","isXl","useMatchBreakpoints","hasAcceptedRisk","setHasAcceptedRisk","hasAcceptedChart","setHasAcceptedChart","initialBlock","useInitialBlock","isDesktop","onPresentRiskDisclaimer","onPresentChartDisclaimer","onPresentRiskDisclaimerRef","onPresentChartDisclaimerRef","all","getStaticPredictionsData","staticPredictionsData","intervalBlocks","bufferBlocks","latestRound","find","market","paused","setPredictionStatus","currentRoundStartBlock","futureRounds","halfInterval","i","push","makeFutureRoundResponse","roundData","makeRoundData","transformRoundResponse","initialize","currentRoundStartBlockNumber","history","fetchInitialData","INITIAL","PageLoader"],"mappings":"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","file":"static/js/6.5b29f59c.chunk.js","sourcesContent":["import React from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport {\r\n  ArrowForwardIcon,\r\n  Box,\r\n  Button,\r\n  Radio,\r\n  Flex,\r\n  Heading,\r\n  Text,\r\n  ButtonMenu,\r\n  ButtonMenuItem,\r\n} from '@pancakeswap/uikit'\r\nimport { useAppDispatch } from 'state'\r\nimport { HistoryFilter } from 'state/types'\r\nimport { setHistoryFilter, setHistoryPaneState, fetchHistory } from 'state/predictions'\r\nimport { useGetHistoryFilter, useGetIsFetchingHistory } from 'state/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\nimport { getBubbleGumBackground } from '../../helpers'\r\n\r\nconst Filter = styled.label`\r\n  align-items: center;\r\n  cursor: pointer;\r\n  display: inline-flex;\r\n  margin-right: 16px;\r\n`\r\n\r\nconst StyledHeader = styled(Box)`\r\n  background: ${({ theme }) => getBubbleGumBackground(theme)};\r\n  flex: none;\r\n  padding: 16px;\r\n`\r\n\r\nconst ButtonMenuContainer = styled.div`\r\n  width: 100%;\r\n  & > div {\r\n    width: 100%;\r\n  }\r\n\r\n  & button {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nconst getClaimParam = (historyFilter: HistoryFilter) => {\r\n  switch (historyFilter) {\r\n    case HistoryFilter.COLLECTED:\r\n      return true\r\n    case HistoryFilter.UNCOLLECTED:\r\n      return false\r\n    case HistoryFilter.ALL:\r\n    default:\r\n      return undefined\r\n  }\r\n}\r\n\r\ninterface HeaderProps {\r\n  activeTab: HistoryTabs\r\n  setActiveTab: (value: HistoryTabs) => void\r\n}\r\n\r\nexport enum HistoryTabs {\r\n  ROUNDS,\r\n  PNL,\r\n}\r\n\r\nconst Header: React.FC<HeaderProps> = ({ activeTab, setActiveTab }) => {\r\n  const historyFilter = useGetHistoryFilter()\r\n  const isFetchingHistory = useGetIsFetchingHistory()\r\n  const { t } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n\r\n  const handleClick = () => {\r\n    dispatch(setHistoryPaneState(false))\r\n  }\r\n\r\n  const handleChange = (newFilter: HistoryFilter) => async () => {\r\n    if (newFilter !== historyFilter) {\r\n      await dispatch(fetchHistory({ account, claimed: getClaimParam(newFilter) }))\r\n      dispatch(setHistoryFilter(newFilter))\r\n    }\r\n  }\r\n\r\n  const switchTab = async (tabIndex: number) => {\r\n    setActiveTab(tabIndex)\r\n    await handleChange(HistoryFilter.ALL)()\r\n  }\r\n\r\n  return (\r\n    <StyledHeader>\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n        <Heading as=\"h3\" size=\"md\">\r\n          {t('History')}\r\n        </Heading>\r\n        <Button onClick={handleClick} variant=\"text\" endIcon={<ArrowForwardIcon color=\"primary\" />} px=\"0\">\r\n          {t('Close')}\r\n        </Button>\r\n      </Flex>\r\n      <ButtonMenuContainer>\r\n        <ButtonMenu activeIndex={activeTab} scale=\"sm\" variant=\"subtle\" onItemClick={switchTab}>\r\n          <ButtonMenuItem>{t('Rounds')}</ButtonMenuItem>\r\n          <ButtonMenuItem>{t('PNL')}</ButtonMenuItem>\r\n        </ButtonMenu>\r\n      </ButtonMenuContainer>\r\n      {activeTab === HistoryTabs.ROUNDS && (\r\n        <>\r\n          <Text color=\"textSubtle\" fontSize=\"12px\" mb=\"8px\">\r\n            {t('Filter')}\r\n          </Text>\r\n          <Flex alignItems=\"center\">\r\n            <Filter>\r\n              <Radio\r\n                scale=\"sm\"\r\n                checked={historyFilter === HistoryFilter.ALL}\r\n                disabled={isFetchingHistory || !account}\r\n                onChange={handleChange(HistoryFilter.ALL)}\r\n              />\r\n              <Text ml=\"4px\">{t('All')}</Text>\r\n            </Filter>\r\n            <Filter>\r\n              <Radio\r\n                scale=\"sm\"\r\n                checked={historyFilter === HistoryFilter.COLLECTED}\r\n                disabled={isFetchingHistory || !account}\r\n                onChange={handleChange(HistoryFilter.COLLECTED)}\r\n              />\r\n              <Text ml=\"4px\">{t('Collected')}</Text>\r\n            </Filter>\r\n            <Filter>\r\n              <Radio\r\n                scale=\"sm\"\r\n                checked={historyFilter === HistoryFilter.UNCOLLECTED}\r\n                disabled={isFetchingHistory || !account}\r\n                onChange={handleChange(HistoryFilter.UNCOLLECTED)}\r\n              />\r\n              <Text ml=\"4px\">{t('Uncollected')}</Text>\r\n            </Filter>\r\n          </Flex>\r\n        </>\r\n      )}\r\n    </StyledHeader>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","import { useEffect, useState } from 'react'\r\n\r\n/**\r\n * Same as \"useState\" but saves the value to local storage each time it changes\r\n */\r\nconst usePersistState = (initialValue: any, localStorageKey: string) => {\r\n  const [value, setValue] = useState(() => {\r\n    try {\r\n      const valueFromLS = localStorage.getItem(localStorageKey)\r\n\r\n      return valueFromLS ? JSON.parse(valueFromLS) : initialValue\r\n    } catch (error) {\r\n      return initialValue\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(localStorageKey, JSON.stringify(value))\r\n  }, [value, localStorageKey])\r\n\r\n  return [value, setValue]\r\n}\r\n\r\nexport default usePersistState\r\n","import { useEffect, useState, useRef } from 'react'\r\nimport Web3 from 'web3'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { getWeb3NoAccount } from 'utils/web3'\r\n\r\n/**\r\n * Provides a web3 instance using the provider provided by useWallet\r\n * with a fallback of an httpProver\r\n * Recreate web3 instance only if the provider change\r\n */\r\nconst useWeb3 = () => {\r\n  const { library } = useWeb3React()\r\n  const refEth = useRef(library)\r\n  const [web3, setweb3] = useState(library ? new Web3(library) : getWeb3NoAccount())\r\n\r\n  useEffect(() => {\r\n    if (library !== refEth.current) {\r\n      setweb3(library ? new Web3(library) : getWeb3NoAccount())\r\n      refEth.current = library\r\n    }\r\n  }, [library])\r\n\r\n  return web3\r\n}\r\n\r\nexport default useWeb3\r\n","import { useMemo } from 'react'\r\nimport useWeb3 from 'hooks/useWeb3'\r\nimport {\r\n  getBep20Contract,\r\n  getCakeContract,\r\n  getBunnyFactoryContract,\r\n  getBunnySpecialContract,\r\n  getPancakeRabbitContract,\r\n  getProfileContract,\r\n  getIfoV1Contract,\r\n  getIfoV2Contract,\r\n  getLotteryContract,\r\n  getLotteryTicketContract,\r\n  getMasterchefContract,\r\n  getPointCenterIfoContract,\r\n\r\n  getClaimRefundContract,\r\n  getTradingCompetitionContract,\r\n  getEasterNftContract,\r\n  getErc721Contract,\r\n  getCakeVaultContract,\r\n  getPredictionsContract,\r\n  getChainlinkOracleContract,\r\n\r\n} from 'utils/contractHelpers'\r\n\r\n/**\r\n * Helper hooks to get specific contracts (by ABI)\r\n */\r\n\r\nexport const useIfoV1Contract = (address: string) => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getIfoV1Contract(address, web3), [address, web3])\r\n}\r\n\r\nexport const useIfoV2Contract = (address: string) => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getIfoV2Contract(address, web3), [address, web3])\r\n}\r\n\r\nexport const useERC20 = (address: string) => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getBep20Contract(address, web3), [address, web3])\r\n}\r\n\r\n/**\r\n * @see https://docs.openzeppelin.com/contracts/3.x/api/token/erc721\r\n */\r\nexport const useERC721 = (address: string) => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getErc721Contract(address, web3), [address, web3])\r\n}\r\n\r\nexport const useCake = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getCakeContract(web3), [web3])\r\n}\r\n\r\nexport const useBunnyFactory = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getBunnyFactoryContract(web3), [web3])\r\n}\r\n\r\nexport const usePancakeRabbits = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getPancakeRabbitContract(web3), [web3])\r\n}\r\n\r\nexport const useProfile = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getProfileContract(web3), [web3])\r\n}\r\n\r\nexport const useLottery = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getLotteryContract(web3), [web3])\r\n}\r\n\r\nexport const useLotteryTicket = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getLotteryTicketContract(web3), [web3])\r\n}\r\n\r\nexport const useMasterchef = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getMasterchefContract(web3), [web3])\r\n}\r\n\r\nexport const usePointCenterIfoContract = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getPointCenterIfoContract(web3), [web3])\r\n}\r\n\r\nexport const useBunnySpecialContract = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getBunnySpecialContract(web3), [web3])\r\n}\r\n\r\nexport const useClaimRefundContract = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getClaimRefundContract(web3), [web3])\r\n}\r\n\r\nexport const useTradingCompetitionContract = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getTradingCompetitionContract(web3), [web3])\r\n}\r\n\r\nexport const useEasterNftContract = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getEasterNftContract(web3), [web3])\r\n}\r\n\r\nexport const useCakeVaultContract = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getCakeVaultContract(web3), [web3])\r\n}\r\n\r\nexport const usePredictionsContract = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getPredictionsContract(web3), [web3])\r\n}\r\n\r\nexport const useChainlinkOracleContract = () => {\r\n  const web3 = useWeb3()\r\n  return useMemo(() => getChainlinkOracleContract(web3), [web3])\r\n}\r\n","import { useEffect, useRef } from 'react'\r\n\r\n/**\r\n * Returns the previous value of the given value\r\n *\r\n * @see https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\r\n */\r\nconst usePreviousValue = (value: any) => {\r\n  const ref = useRef()\r\n\r\n  useEffect(() => {\r\n    ref.current = value\r\n  })\r\n\r\n  return ref.current\r\n}\r\n\r\nexport default usePreviousValue\r\n","import { useCallback, useState } from 'react'\r\nimport usePreviousValue from './usePreviousValue'\r\n\r\n/**\r\n * A helper hook to keep track of the time between events\r\n * Can also be used to force an effect to re-run\r\n */\r\nconst useLastUpdated = () => {\r\n  const [lastUpdated, setStateLastUpdated] = useState(Date.now())\r\n  const previousLastUpdated = usePreviousValue(lastUpdated)\r\n\r\n  const setLastUpdated = useCallback(() => {\r\n    setStateLastUpdated(Date.now())\r\n  }, [setStateLastUpdated])\r\n\r\n  return { lastUpdated, previousLastUpdated, setLastUpdated }\r\n}\r\n\r\nexport default useLastUpdated\r\n","import { useEffect, useState } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useChainlinkOracleContract } from 'hooks/useContract'\r\nimport useLastUpdated from 'hooks/useLastUpdated'\r\nimport { getBalanceAmount } from 'utils/formatBalance'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\n\r\nconst useGetLatestOraclePrice = () => {\r\n  const [price, setPrice] = useState(BIG_ZERO)\r\n  const { lastUpdated, setLastUpdated: refresh } = useLastUpdated()\r\n  const chainlinkOracleContract = useChainlinkOracleContract()\r\n\r\n  useEffect(() => {\r\n    const fetchPrice = async () => {\r\n      const response = await chainlinkOracleContract.methods.latestAnswer().call()\r\n      setPrice(getBalanceAmount(new BigNumber(response), 8))\r\n    }\r\n\r\n    fetchPrice()\r\n  }, [chainlinkOracleContract, lastUpdated, setPrice])\r\n\r\n  return { price, lastUpdated, refresh }\r\n}\r\n\r\nexport default useGetLatestOraclePrice\r\n","import { useEffect } from 'react'\r\nimport { useAppDispatch } from 'state'\r\nimport { setLastOraclePrice } from 'state/predictions'\r\nimport useGetLatestOraclePrice from './useGetLatestOraclePrice'\r\n\r\nconst usePollOraclePrice = (seconds = 30) => {\r\n  const { price, refresh } = useGetLatestOraclePrice()\r\n  const dispatch = useAppDispatch()\r\n\r\n  // Poll for the oracle price\r\n  useEffect(() => {\r\n    refresh()\r\n    const timer = setInterval(() => {\r\n      refresh()\r\n    }, seconds * 1000)\r\n\r\n    return () => {\r\n      clearInterval(timer)\r\n    }\r\n  }, [seconds, refresh])\r\n\r\n  // If the price changed update global state\r\n  useEffect(() => {\r\n    dispatch(setLastOraclePrice(price.toJSON()))\r\n  }, [price, dispatch])\r\n}\r\n\r\nexport default usePollOraclePrice\r\n","import { useWeb3React } from '@web3-react/core'\r\nimport { useEffect } from 'react'\r\nimport { useAppDispatch } from 'state'\r\nimport { updateMarketData } from 'state/predictions'\r\nimport { getMarketData } from 'state/predictions/helpers'\r\n\r\nconst POLL_TIME_IN_SECONDS = 10\r\n\r\nconst usePollRoundData = () => {\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n\r\n  useEffect(() => {\r\n    const timer = setInterval(async () => {\r\n      const marketData = await getMarketData()\r\n\r\n      dispatch(updateMarketData(marketData))\r\n    }, POLL_TIME_IN_SECONDS * 1000)\r\n\r\n    return () => {\r\n      clearInterval(timer)\r\n    }\r\n  }, [account, dispatch])\r\n}\r\n\r\nexport default usePollRoundData\r\n","import styled from 'styled-components'\r\n\r\nconst Container = styled.div`\r\n  background: ${({ theme }) => theme.colors.gradients.violetAlt};\r\n  height: calc(100vh - 64px);\r\n  min-height: calc(100vh - 64px);\r\n  overflow: hidden;\r\n  position: relative;\r\n`\r\n\r\nexport default Container\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport styled, { css, keyframes } from 'styled-components'\r\nimport { Button, CloseIcon, IconButton, TrophyGoldIcon } from '@pancakeswap/uikit'\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getBetHistory } from 'state/predictions/helpers'\r\nimport { useGetPredictionsStatus, useIsHistoryPaneOpen } from 'state/hooks'\r\nimport { useAppDispatch } from 'state'\r\nimport { setHistoryPaneState } from 'state/predictions'\r\n\r\n/**\r\n * @see https://github.com/animate-css/animate.css/tree/main/source\r\n */\r\nconst bounceInKeyframe = keyframes`\r\n  from,\r\n  60%,\r\n  75%,\r\n  90%,\r\n  to {\r\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\r\n  }\r\n\r\n  from {\r\n    opacity: 0;\r\n    transform: translate3d(0, 3000px, 0) scaleY(5);\r\n  }\r\n\r\n  60% {\r\n    opacity: 1;\r\n    transform: translate3d(0, -20px, 0) scaleY(0.9);\r\n  }\r\n\r\n  75% {\r\n    transform: translate3d(0, 10px, 0) scaleY(0.95);\r\n  }\r\n\r\n  90% {\r\n    transform: translate3d(0, -5px, 0) scaleY(0.985);\r\n  }\r\n\r\n  to {\r\n    transform: translate3d(0, 0, 0);\r\n  }\r\n`\r\n\r\nconst bounceOutKeyframe = keyframes`\r\n  20% {\r\n    transform: translate3d(0, 10px, 0) scaleY(0.985);\r\n  }\r\n\r\n  40%,\r\n  45% {\r\n    opacity: 1;\r\n    transform: translate3d(0, -20px, 0) scaleY(0.9);\r\n  }\r\n\r\n  to {\r\n    opacity: 0;\r\n    transform: translate3d(0, 2000px, 0) scaleY(3);\r\n  }\r\n`\r\n\r\nconst bounceInAnimation = css`\r\n  animation: ${bounceInKeyframe} 1s;\r\n`\r\n\r\nconst bounceOutAnimation = css`\r\n  animation: ${bounceOutKeyframe} 1s;\r\n`\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  bottom: 72px;\r\n  color: #ffffff;\r\n  display: flex;\r\n  justify-content: center;\r\n  left: 0;\r\n  padding-left: 16px;\r\n  padding-right: 16px;\r\n  position: absolute;\r\n  width: 100%;\r\n  z-index: 50;\r\n\r\n  &.popup-enter-active {\r\n    ${bounceInAnimation}\r\n  }\r\n\r\n  &.popup-enter-done {\r\n    bottom: 72px;\r\n  }\r\n\r\n  &.popup-exit-done {\r\n    bottom: -2000px;\r\n  }\r\n\r\n  &.popup-exit-active {\r\n    ${bounceOutAnimation}\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    bottom: 16px;\r\n    justify-content: flex-end;\r\n\r\n    &.popup-enter-done {\r\n      bottom: 16px;\r\n    }\r\n  }\r\n`\r\n\r\nconst Popup = styled.div`\r\n  align-items: center;\r\n  background-color: ${({ theme }) => theme.colors.secondary};\r\n  border-radius: 32px;\r\n  color: #ffffff;\r\n  display: flex;\r\n  max-width: 320px;\r\n  padding: 16px 8px;\r\n`\r\n\r\nconst CollectWinningsPopup = () => {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const { t } = useTranslation()\r\n  const ref = useRef(null)\r\n  const timer = useRef(null)\r\n  const { account } = useWeb3React()\r\n  const predictionStatus = useGetPredictionsStatus()\r\n  const isHistoryPaneOpen = useIsHistoryPaneOpen()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const handleOpenHistory = () => {\r\n    dispatch(setHistoryPaneState(true))\r\n  }\r\n\r\n  const handleClick = () => {\r\n    setIsOpen(false)\r\n    clearInterval(timer.current)\r\n  }\r\n\r\n  // Check user's history for unclaimed winners\r\n  useEffect(() => {\r\n    let isCancelled = false\r\n    if (account) {\r\n      timer.current = setInterval(async () => {\r\n        const bets = await getBetHistory({ user: account.toLowerCase(), claimed: false })\r\n\r\n        if (!isCancelled) {\r\n          // Filter out bets that were not winners\r\n          const winnerBets = bets.filter((bet) => {\r\n            return bet.position === bet.round.position\r\n          })\r\n\r\n          if (!isHistoryPaneOpen) {\r\n            setIsOpen(winnerBets.length > 0)\r\n          }\r\n        }\r\n      }, 30000)\r\n    }\r\n\r\n    return () => {\r\n      clearInterval(timer.current)\r\n      isCancelled = true\r\n    }\r\n  }, [account, timer, predictionStatus, setIsOpen, isHistoryPaneOpen])\r\n\r\n  // Any time the history pane is open make sure the popup closes\r\n  useEffect(() => {\r\n    if (isHistoryPaneOpen) {\r\n      setIsOpen(false)\r\n    }\r\n  }, [isHistoryPaneOpen, setIsOpen])\r\n\r\n  return (\r\n    <CSSTransition in={isOpen} unmountOnExit nodeRef={ref} timeout={1000} classNames=\"popup\">\r\n      <Wrapper ref={ref}>\r\n        <Popup>\r\n          <TrophyGoldIcon width=\"64px\" style={{ flex: 'none' }} mr=\"8px\" />\r\n          <Button style={{ flex: 1 }} onClick={handleOpenHistory}>\r\n            {t('Collect Winnings')}\r\n          </Button>\r\n          <IconButton variant=\"text\" onClick={handleClick}>\r\n            <CloseIcon color=\"primary\" width=\"24px\" />\r\n          </IconButton>\r\n        </Popup>\r\n      </Wrapper>\r\n    </CSSTransition>\r\n  )\r\n}\r\n\r\nexport default CollectWinningsPopup\r\n","import React, { createContext, Dispatch, useState } from 'react'\r\nimport SwiperCore from 'swiper'\r\n\r\ninterface Context {\r\n  swiper: SwiperCore\r\n  setSwiper: Dispatch<React.SetStateAction<SwiperCore>>\r\n  destroySwiper: () => void\r\n}\r\n\r\nexport const SwiperContext = createContext<Context>(undefined)\r\n\r\nconst SwiperProvider = ({ children }) => {\r\n  const [swiper, setSwiper] = useState<SwiperCore>(null)\r\n\r\n  const destroySwiper = () => {\r\n    if (swiper) {\r\n      swiper.destroy()\r\n      setSwiper(null)\r\n    }\r\n  }\r\n\r\n  return <SwiperContext.Provider value={{ swiper, setSwiper, destroySwiper }}>{children}</SwiperContext.Provider>\r\n}\r\n\r\nexport default SwiperProvider\r\n","import React, { useEffect } from 'react'\r\nimport { Box } from '@pancakeswap/uikit'\r\nimport { DefaultTheme, useTheme } from 'styled-components'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\n/**\r\n * When the script tag is injected the TradingView object is not immediately\r\n * available on the window. So we listen for when it gets set\r\n */\r\nconst tradingViewListener = async () =>\r\n  new Promise<void>((resolve) =>\r\n    Object.defineProperty(window, 'TradingView', {\r\n      configurable: true,\r\n      set(value) {\r\n        this.tv = value\r\n        resolve(value)\r\n      },\r\n    }),\r\n  )\r\n\r\nconst initializeTradingView = (TradingViewObj: any, theme: DefaultTheme, localeCode: string) => {\r\n  /* eslint-disable new-cap */\r\n  /* eslint-disable no-new */\r\n  // @ts-ignore\r\n  new TradingViewObj.widget({\r\n    autosize: true,\r\n    height: '100%',\r\n    symbol: 'BINANCE:BNBUSDT',\r\n    interval: '5',\r\n    timezone: 'Etc/UTC',\r\n    theme: theme.isDark ? 'dark' : 'light',\r\n    style: '1',\r\n    locale: localeCode,\r\n    toolbar_bg: '#f1f3f6',\r\n    enable_publishing: false,\r\n    allow_symbol_change: true,\r\n    container_id: 'tradingview_b239c',\r\n  })\r\n}\r\n\r\nconst TradingView = () => {\r\n  const { currentLanguage } = useTranslation()\r\n  const theme = useTheme()\r\n\r\n  useEffect(() => {\r\n    // @ts-ignore\r\n    if (window.TradingView) {\r\n      // @ts-ignore\r\n      initializeTradingView(window.TradingView, theme, currentLanguage.code)\r\n    } else {\r\n      tradingViewListener().then((tv) => {\r\n        initializeTradingView(tv, theme, currentLanguage.code)\r\n      })\r\n    }\r\n  }, [theme, currentLanguage])\r\n\r\n  return (\r\n    <Box overflow=\"hidden\" className=\"tradingview_container\">\r\n      <div id=\"tradingview_b239c\" />\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default TradingView\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Card, CardBody, Heading } from '@pancakeswap/uikit'\r\n\r\ninterface NotificationProps {\r\n  title: string\r\n}\r\n\r\n// const BunnyDecoration = styled.div`\r\n//   position: absolute;\r\n//   top: -130px; // line up bunny at the top of the modal\r\n//   left: 0px;\r\n//   text-align: center;\r\n//   width: 100%;\r\n// `\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex: 1;\r\n  height: 100%;\r\n  justify-content: center;\r\n`\r\n\r\nconst CardWrapper = styled.div`\r\n  position: relative;\r\n  width: 320px;\r\n`\r\n\r\nconst BunnyDecoration = styled.div`\r\n  position: absolute;\r\n  top: -130px;\r\n  left: 0px;\r\n  text-align: center;\r\n  width: 100%;\r\n  z-index: 5;\r\n`\r\n\r\nconst Notification: React.FC<NotificationProps> = ({ title, children }) => {\r\n  return (\r\n    <Wrapper>\r\n      <CardWrapper>\r\n        <BunnyDecoration>\r\n          <img src=\"/images/decorations/hiccup-bunny.png\" alt=\"bunny decoration\" height=\"121px\" width=\"130px\" />\r\n        </BunnyDecoration>\r\n        <Card>\r\n          <CardBody>\r\n            <Heading mb=\"24px\">{title}</Heading>\r\n            {children}\r\n          </CardBody>\r\n        </Card>\r\n      </CardWrapper>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import React from 'react'\r\nimport { Button, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useAppDispatch } from 'state'\r\nimport { setHistoryPaneState } from 'state/predictions'\r\nimport Notification from './Notification'\r\n\r\nconst ErrorNotification = () => {\r\n  const { t } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const handleOpenHistory = () => {\r\n    dispatch(setHistoryPaneState(true))\r\n  }\r\n  return (\r\n    <Notification title={t('Error')}>\r\n      <Text as=\"p\" mb=\"24px\">\r\n        {t('This page can’t be displayed right now due to an error. Please check back soon.')}\r\n      </Text>\r\n      <Button variant=\"primary\" width=\"100%\" onClick={handleOpenHistory}>\r\n        {t('Show History')}\r\n      </Button>\r\n    </Notification>\r\n  )\r\n}\r\n\r\nexport default ErrorNotification\r\n","import React from 'react'\r\nimport { Box, Button, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useAppDispatch } from 'state'\r\nimport { setHistoryPaneState } from 'state/predictions'\r\nimport Notification from './Notification'\r\n\r\nconst PauseNotification = () => {\r\n  const { t } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const handleOpenHistory = () => {\r\n    dispatch(setHistoryPaneState(true))\r\n  }\r\n\r\n  return (\r\n    <Notification title={t('Markets Paused')}>\r\n      <Box mb=\"24px\">\r\n        <Text as=\"p\">{t('Prediction markets have been paused due to an error.')}</Text>\r\n        <Text as=\"p\">{t('All open positions have been cancelled.')}</Text>\r\n        <Text as=\"p\">\r\n          {t('You can reclaim any funds entered into existing positions via the History tab on this page.')}\r\n        </Text>\r\n      </Box>\r\n      <Button variant=\"primary\" width=\"100%\" onClick={handleOpenHistory}>\r\n        {t('Show History')}\r\n      </Button>\r\n    </Notification>\r\n  )\r\n}\r\n\r\nexport default PauseNotification\r\n","import React from 'react'\r\nimport { Button, useWalletModal } from '@pancakeswap/uikit'\r\nimport useAuth from 'hooks/useAuth'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nconst UnlockButton = (props) => {\r\n  const { t } = useTranslation()\r\n  const { login, logout } = useAuth()\r\n  const { onPresentConnectModal } = useWalletModal(login, logout)\r\n\r\n  return (\r\n    <Button onClick={onPresentConnectModal} {...props}>\r\n      {t('Unlock Wallet')}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default UnlockButton\r\n","const MINUTE_IN_SECONDS = 60\r\nconst HOUR_IN_SECONDS = 3600\r\nconst DAY_IN_SECONDS = 86400\r\nconst MONTH_IN_SECONDS = 2629800\r\nconst YEAR_IN_SECONDS = 31557600\r\n\r\n/**\r\n * Format number of seconds into year, month, day, hour, minute, seconds\r\n *\r\n * @param seconds\r\n */\r\nconst getTimePeriods = (seconds: number) => {\r\n  let delta = Math.abs(seconds)\r\n  const timeLeft = {\r\n    years: 0,\r\n    months: 0,\r\n    days: 0,\r\n    hours: 0,\r\n    minutes: 0,\r\n    seconds: 0,\r\n  }\r\n\r\n  if (delta >= YEAR_IN_SECONDS) {\r\n    timeLeft.years = Math.floor(delta / YEAR_IN_SECONDS)\r\n    delta -= timeLeft.years * YEAR_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= MONTH_IN_SECONDS) {\r\n    timeLeft.months = Math.floor(delta / MONTH_IN_SECONDS)\r\n    delta -= timeLeft.months * MONTH_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= DAY_IN_SECONDS) {\r\n    timeLeft.days = Math.floor(delta / DAY_IN_SECONDS)\r\n    delta -= timeLeft.days * DAY_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= HOUR_IN_SECONDS) {\r\n    timeLeft.hours = Math.floor(delta / HOUR_IN_SECONDS)\r\n    delta -= timeLeft.hours * HOUR_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= MINUTE_IN_SECONDS) {\r\n    timeLeft.minutes = Math.floor(delta / MINUTE_IN_SECONDS)\r\n    delta -= timeLeft.minutes * MINUTE_IN_SECONDS\r\n  }\r\n\r\n  timeLeft.seconds = delta\r\n\r\n  return timeLeft\r\n}\r\n\r\nexport default getTimePeriods\r\n","import BigNumber from 'bignumber.js'\r\nimport { Bet, BetPosition } from 'state/types'\r\nimport { DefaultTheme } from 'styled-components'\r\nimport { formatNumber, getBalanceAmount } from 'utils/formatBalance'\r\nimport getTimePeriods from 'utils/getTimePeriods'\r\n\r\nexport const getBnbAmount = (bnbBn: BigNumber) => {\r\n  return getBalanceAmount(bnbBn, 18)\r\n}\r\n\r\nexport const formatUsd = (usd: number) => {\r\n  return `$${formatNumber(usd || 0, 3, 3)}`\r\n}\r\n\r\nexport const formatBnb = (bnb: number) => {\r\n  return bnb ? bnb.toLocaleString(undefined, { minimumFractionDigits: 3, maximumFractionDigits: 3 }) : '0'\r\n}\r\n\r\nexport const formatBnbFromBigNumber = (bnbBn: BigNumber) => {\r\n  return formatBnb(getBnbAmount(bnbBn).toNumber())\r\n}\r\n\r\nexport const padTime = (num: number) => num.toString().padStart(2, '0')\r\n\r\nexport const formatRoundTime = (secondsBetweenBlocks: number) => {\r\n  const { hours, minutes, seconds } = getTimePeriods(secondsBetweenBlocks)\r\n  const minutesSeconds = `${padTime(minutes)}:${padTime(seconds)}`\r\n\r\n  if (hours > 0) {\r\n    return `${padTime(hours)}:${minutesSeconds}`\r\n  }\r\n\r\n  return minutesSeconds\r\n}\r\n\r\nexport const getMultiplier = (total: number, amount: number) => {\r\n  if (total === 0 || amount === 0) {\r\n    return 0\r\n  }\r\n\r\n  return total / amount\r\n}\r\n\r\n/**\r\n * Calculates the total payout given a bet\r\n */\r\nexport const getPayout = (bet: Bet) => {\r\n  if (!bet || !bet.round) {\r\n    return 0\r\n  }\r\n\r\n  const { bullAmount, bearAmount, totalAmount } = bet.round\r\n  const multiplier = getMultiplier(totalAmount, bet.position === BetPosition.BULL ? bullAmount : bearAmount)\r\n  return bet.amount * multiplier\r\n}\r\n\r\n// TODO: Move this to the UI Kit\r\nexport const getBubbleGumBackground = (theme: DefaultTheme) => {\r\n  if (theme.isDark) {\r\n    return 'linear-gradient(139.73deg, #142339 0%, #24243D 47.4%, #37273F 100%)'\r\n  }\r\n\r\n  return 'linear-gradient(139.73deg, #E6FDFF 0%, #EFF4F5 46.87%, #F3EFFF 100%)'\r\n}\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  ModalContainer,\r\n  ModalBody,\r\n  ModalTitle,\r\n  ModalHeader,\r\n  InjectedModalProps,\r\n  Button,\r\n  AutoRenewIcon,\r\n  TrophyGoldIcon,\r\n  Text,\r\n  Flex,\r\n  Heading,\r\n  Box,\r\n  LinkExternal,\r\n  ModalCloseButton,\r\n} from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useAppDispatch } from 'state'\r\n\r\nimport { markBetAsCollected } from 'state/predictions'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useToast from 'hooks/useToast'\r\nimport { usePredictionsContract } from 'hooks/useContract'\r\nimport { formatBnb } from '../helpers'\r\n\r\ninterface CollectRoundWinningsModalProps extends InjectedModalProps {\r\n  payout: number\r\n  roundId: string\r\n  epoch: number\r\n  onSuccess?: () => Promise<void>\r\n}\r\n\r\nconst Modal = styled(ModalContainer)`\r\n  overflow: visible;\r\n`\r\n\r\nconst BunnyDecoration = styled.div`\r\n  position: absolute;\r\n  top: -116px; // line up bunny at the top of the modal\r\n  left: 0px;\r\n  text-align: center;\r\n  width: 100%;\r\n`\r\n\r\nconst CollectRoundWinningsModal: React.FC<CollectRoundWinningsModalProps> = ({\r\n  payout,\r\n  roundId,\r\n  epoch,\r\n  onDismiss,\r\n  onSuccess,\r\n}) => {\r\n  const [isPendingTx, setIsPendingTx] = useState(false)\r\n  const { account } = useWeb3React()\r\n  const { t } = useTranslation()\r\n  const { toastSuccess, toastError } = useToast()\r\n  const predictionsContract = usePredictionsContract()\r\n\r\n  const dispatch = useAppDispatch()\r\n\r\n  const handleClick = () => {\r\n    predictionsContract.methods\r\n      .claim(epoch)\r\n      .send({ from: account })\r\n      .once('sending', () => {\r\n        setIsPendingTx(true)\r\n      })\r\n      .once('receipt', async (result) => {\r\n        if (onSuccess) {\r\n          await onSuccess()\r\n        }\r\n\r\n        dispatch(markBetAsCollected({ account, roundId }))\r\n        onDismiss()\r\n        setIsPendingTx(false)\r\n        toastSuccess(\r\n          t('Winnings collected!'),\r\n          <Box>\r\n            <Text as=\"p\" mb=\"8px\">\r\n              {t('Your prizes have been sent to your wallet')}\r\n            </Text>\r\n            {result.transactionHash && (\r\n              <LinkExternal href={`https://bscscan.com/tx/${result.transactionHash}`}>\r\n                {t('View on BscScan')}\r\n              </LinkExternal>\r\n            )}\r\n          </Box>,\r\n        )\r\n      })\r\n      .once('error', (error) => {\r\n        setIsPendingTx(false)\r\n        toastError(t('Error'), error?.message)\r\n        console.error(error)\r\n      })\r\n  }\r\n\r\n  return (\r\n    <Modal minWidth=\"288px\" position=\"relative\" mt=\"124px\">\r\n      <BunnyDecoration>\r\n        <img src=\"/images/decorations/prize-bunny.png\" alt=\"bunny decoration\" height=\"124px\" width=\"168px\" />\r\n      </BunnyDecoration>\r\n      <ModalHeader>\r\n        <ModalTitle>\r\n          <Heading>{t('Collect Winnings')}</Heading>\r\n        </ModalTitle>\r\n        <ModalCloseButton onDismiss={onDismiss} />\r\n      </ModalHeader>\r\n      <ModalBody p=\"24px\">\r\n        <TrophyGoldIcon width=\"96px\" mx=\"auto\" mb=\"24px\" />\r\n        <Flex alignItems=\"start\" justifyContent=\"space-between\" mb=\"24px\">\r\n          <Text>{t('Collecting')}</Text>\r\n          <Box style={{ textAlign: 'right' }}>\r\n            <Text>{`${formatBnb(payout)} BNB`}</Text>\r\n           \r\n          </Box>\r\n        </Flex>\r\n        <Button\r\n          width=\"100%\"\r\n          mb=\"8px\"\r\n          onClick={handleClick}\r\n          isLoading={isPendingTx}\r\n          endIcon={isPendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n        >\r\n          {t('Confirm')}\r\n        </Button>\r\n      </ModalBody>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default CollectRoundWinningsModal\r\n","import React from 'react'\r\nimport { Button, ButtonProps, useModal } from '@pancakeswap/uikit'\r\nimport CollectRoundWinningsModal from './CollectRoundWinningsModal'\r\n\r\ninterface CollectWinningsButtonProps extends ButtonProps {\r\n  payout: number\r\n  roundId: string\r\n  epoch: number\r\n  hasClaimed: boolean\r\n  onSuccess?: () => Promise<void>\r\n}\r\n\r\nconst CollectWinningsButton: React.FC<CollectWinningsButtonProps> = ({\r\n  payout,\r\n  roundId,\r\n  epoch,\r\n  hasClaimed,\r\n  onSuccess,\r\n  children,\r\n  ...props\r\n}) => {\r\n  const [onPresentCollectWinningsModal] = useModal(\r\n    <CollectRoundWinningsModal payout={payout} roundId={roundId} epoch={epoch} onSuccess={onSuccess} />,\r\n    false,\r\n  )\r\n\r\n  return (\r\n    <Button onClick={onPresentCollectWinningsModal} disabled={hasClaimed} {...props}>\r\n      {children}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default CollectWinningsButton\r\n","import React, { ReactNode, useState } from 'react'\r\nimport { AutoRenewIcon, Button, ButtonProps } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { usePredictionsContract } from 'hooks/useContract'\r\nimport useToast from 'hooks/useToast'\r\n\r\ninterface ReclaimPositionButtonProps extends ButtonProps {\r\n  epoch: number\r\n  onSuccess?: () => Promise<void>\r\n  children?: ReactNode\r\n}\r\n\r\nconst ReclaimPositionButton: React.FC<ReclaimPositionButtonProps> = ({ epoch, onSuccess, children, ...props }) => {\r\n  const [isPendingTx, setIsPendingTx] = useState(false)\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const predictionsContract = usePredictionsContract()\r\n  const { toastSuccess, toastError } = useToast()\r\n\r\n  const handleReclaim = () => {\r\n    predictionsContract.methods\r\n      .claim(epoch)\r\n      .send({ from: account })\r\n      .once('sending', () => {\r\n        setIsPendingTx(true)\r\n      })\r\n      .once('receipt', async () => {\r\n        if (onSuccess) {\r\n          await onSuccess()\r\n        }\r\n        setIsPendingTx(false)\r\n        toastSuccess(t('Position reclaimed!'))\r\n      })\r\n      .once('error', (error) => {\r\n        setIsPendingTx(false)\r\n        toastError(t('Error'), error?.message)\r\n        console.error(error)\r\n      })\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      onClick={handleReclaim}\r\n      isLoading={isPendingTx}\r\n      endIcon={isPendingTx ? <AutoRenewIcon spin color=\"white\" /> : null}\r\n      {...props}\r\n    >\r\n      {children || t('Reclaim Position')}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default ReclaimPositionButton\r\n","import React, { ReactNode } from 'react'\r\nimport styled from 'styled-components'\r\nimport { ArrowUpIcon, ArrowDownIcon, Flex, FlexProps, Text } from '@pancakeswap/uikit'\r\nimport { BetPosition } from 'state/types'\r\n\r\ninterface TagProps extends FlexProps {\r\n  bg?: string\r\n  startIcon?: ReactNode\r\n}\r\n\r\nconst StyledTag = styled(Flex)<{ bg: TagProps['bg'] }>`\r\n  background-color: ${({ bg, theme }) => theme.colors[bg]};\r\n  display: inline-flex;\r\n`\r\n\r\nexport const Tag: React.FC<TagProps> = ({ bg = 'success', startIcon, children, onClick, ...props }) => {\r\n  const icon = startIcon || <ArrowUpIcon color=\"white\" />\r\n\r\n  return (\r\n    <StyledTag\r\n      alignItems=\"center\"\r\n      justifyContent=\"center\"\r\n      borderRadius=\"4px\"\r\n      bg={bg}\r\n      py=\"4px\"\r\n      px=\"8px\"\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? 'pointer' : 'normal' }}\r\n      {...props}\r\n    >\r\n      {icon}\r\n      <Text textTransform=\"uppercase\" color=\"white\" ml=\"4px\">\r\n        {children}\r\n      </Text>\r\n    </StyledTag>\r\n  )\r\n}\r\n\r\ninterface PositionTagProps extends FlexProps {\r\n  betPosition: BetPosition\r\n}\r\n\r\nconst PositionTag: React.FC<PositionTagProps> = ({ betPosition, children, ...props }) => {\r\n  const isUpPosition = betPosition === BetPosition.BULL\r\n  const icon = isUpPosition ? <ArrowUpIcon color=\"white\" /> : <ArrowDownIcon color=\"white\" />\r\n\r\n  return (\r\n    <Tag bg={isUpPosition ? 'success' : 'failure'} startIcon={icon} {...props}>\r\n      {children}\r\n    </Tag>\r\n  )\r\n}\r\n\r\nexport default PositionTag\r\n","import React from 'react'\r\nimport styled, { DefaultTheme } from 'styled-components'\r\nimport { Box, Flex, FlexProps, Text } from '@pancakeswap/uikit'\r\nimport { formatBnb, formatUsd } from 'views/Predictions/helpers'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { BetPosition, Round } from 'state/types'\r\n\r\n// PrizePoolRow\r\ninterface PrizePoolRowProps extends FlexProps {\r\n  totalAmount: Round['totalAmount']\r\n}\r\n\r\nconst getPrizePoolAmount = (totalAmount: PrizePoolRowProps['totalAmount']) => {\r\n  if (!totalAmount) {\r\n    return '0'\r\n  }\r\n\r\n  return formatBnb(totalAmount)\r\n}\r\n\r\nconst Row = ({ children, ...props }) => {\r\n  return (\r\n    <Flex alignItems=\"center\" justifyContent=\"space-between\" {...props}>\r\n      {children}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport const PrizePoolRow: React.FC<PrizePoolRowProps> = ({ totalAmount, ...props }) => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Row {...props}>\r\n      <Text bold>{t('Prize Pool')}:</Text>\r\n      <Text bold>{`${getPrizePoolAmount(totalAmount)} BNB`}</Text>\r\n    </Row>\r\n  )\r\n}\r\n\r\n// Payout Row\r\ninterface PayoutRowProps extends FlexProps {\r\n  positionLabel: string\r\n  multiplier: number\r\n  amount: number\r\n}\r\n\r\nexport const PayoutRow: React.FC<PayoutRowProps> = ({ positionLabel, multiplier, amount, ...props }) => {\r\n  const { t } = useTranslation()\r\n  const formattedMultiplier = `${multiplier.toLocaleString(undefined, { maximumFractionDigits: 2 })}x`\r\n\r\n  return (\r\n    <Row height=\"18px\" {...props}>\r\n      <Text fontSize=\"12px\" textTransform=\"uppercase\">\r\n        {positionLabel}:\r\n      </Text>\r\n      <Flex alignItems=\"center\">\r\n        <Text fontSize=\"12px\" lineHeight=\"18px\" bold>\r\n          {t('%multiplier% Payout', { multiplier: formattedMultiplier })}\r\n        </Text>\r\n        <Text mx=\"4px\">|</Text>\r\n        <Text fontSize=\"12px\" lineHeight=\"18px\">{`${formatBnb(amount)} BNB`}</Text>\r\n      </Flex>\r\n    </Row>\r\n  )\r\n}\r\n\r\n// LockPriceRow\r\ninterface LockPriceRowProps extends FlexProps {\r\n  lockPrice: Round['lockPrice']\r\n}\r\n\r\nexport const LockPriceRow: React.FC<LockPriceRowProps> = ({ lockPrice, ...props }) => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Row {...props}>\r\n      <Text fontSize=\"14px\">{t('Locked Price')}:</Text>\r\n      <Text fontSize=\"14px\">{formatUsd(lockPrice)}</Text>\r\n    </Row>\r\n  )\r\n}\r\n\r\n// RoundResultBox\r\ninterface RoundResultBoxProps {\r\n  betPosition?: BetPosition\r\n  isNext?: boolean\r\n  isLive?: boolean\r\n  hasEntered?: boolean\r\n}\r\n\r\nconst getBackgroundColor = ({\r\n  theme,\r\n  betPosition,\r\n  isNext,\r\n  isLive,\r\n  hasEntered,\r\n}: RoundResultBoxProps & { theme: DefaultTheme }) => {\r\n  if (isNext) {\r\n    return 'linear-gradient(180deg, #53DEE9 0%, #7645D9 100%)'\r\n  }\r\n\r\n  if (hasEntered || isLive) {\r\n    return theme.colors.secondary\r\n  }\r\n\r\n  if (betPosition === BetPosition.BULL) {\r\n    return theme.colors.success\r\n  }\r\n\r\n  if (betPosition === BetPosition.BEAR) {\r\n    return theme.colors.failure\r\n  }\r\n\r\n  return theme.colors.borderColor\r\n}\r\n\r\nconst Background = styled(Box)<RoundResultBoxProps>`\r\n  background: ${getBackgroundColor};\r\n  border-radius: 16px;\r\n  padding: 2px;\r\n`\r\n\r\nconst StyledRoundResultBox = styled.div`\r\n  background: ${({ theme }) => theme.card.background};\r\n  border-radius: 14px;\r\n  padding: 16px;\r\n`\r\n\r\nexport const RoundResultBox: React.FC<RoundResultBoxProps> = ({\r\n  isNext = false,\r\n  hasEntered = false,\r\n  isLive = false,\r\n  children,\r\n  ...props\r\n}) => {\r\n  return (\r\n    <Background isNext={isNext} hasEntered={hasEntered} isLive={isLive} {...props}>\r\n      <StyledRoundResultBox>{children}</StyledRoundResultBox>\r\n    </Background>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { BoxProps, Flex, Text } from '@pancakeswap/uikit'\r\nimport { BetPosition, Round } from 'state/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { formatUsd } from '../../helpers'\r\nimport PositionTag from '../PositionTag'\r\nimport { LockPriceRow, PrizePoolRow, RoundResultBox } from './styles'\r\n\r\ninterface RoundResultProps extends BoxProps {\r\n  round: Round\r\n}\r\n\r\nconst RoundResult: React.FC<RoundResultProps> = ({ round, children, ...props }) => {\r\n  const { lockPrice, closePrice, totalAmount } = round\r\n  const betPosition = closePrice > lockPrice ? BetPosition.BULL : BetPosition.BEAR\r\n  const isPositionUp = betPosition === BetPosition.BULL\r\n  const { t } = useTranslation()\r\n  const priceDifference = closePrice - lockPrice\r\n\r\n  return (\r\n    <RoundResultBox betPosition={betPosition} {...props}>\r\n      <Text color=\"textSubtle\" fontSize=\"12px\" bold textTransform=\"uppercase\" mb=\"8px\">\r\n        {t('Closed Price')}\r\n      </Text>\r\n      {round.failed ? (\r\n        <Text bold textTransform=\"uppercase\" color=\"textDisabled\" mb=\"16px\" fontSize=\"24px\">\r\n          {t('Canceled')}\r\n        </Text>\r\n      ) : (\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n          <Text color={isPositionUp ? 'success' : 'failure'} bold fontSize=\"24px\">\r\n            {formatUsd(closePrice)}\r\n          </Text>\r\n          <PositionTag betPosition={betPosition}>{formatUsd(priceDifference)}</PositionTag>\r\n        </Flex>\r\n      )}\r\n      {lockPrice && <LockPriceRow lockPrice={lockPrice} />}\r\n      <PrizePoolRow totalAmount={totalAmount} />\r\n      {children}\r\n    </RoundResultBox>\r\n  )\r\n}\r\n\r\nexport default RoundResult\r\n","import { useEffect, useState } from 'react'\r\nimport { usePredictionsContract } from 'hooks/useContract'\r\nimport { useWeb3React } from '@web3-react/core'\r\n\r\nconst useIsRefundable = (epoch: number) => {\r\n  const [isRefundable, setIsRefundable] = useState(false)\r\n  const predictionsContract = usePredictionsContract()\r\n  const { account } = useWeb3React()\r\n\r\n  useEffect(() => {\r\n    const fetchRefundableStatus = async () => {\r\n      const canClaim = await predictionsContract.methods.claimable(epoch, account).call()\r\n\r\n      if (canClaim) {\r\n        const refundable = await predictionsContract.methods.refundable(epoch, account).call()\r\n        setIsRefundable(refundable)\r\n      } else {\r\n        setIsRefundable(false)\r\n      }\r\n    }\r\n\r\n    if (account) {\r\n      fetchRefundableStatus()\r\n    }\r\n  }, [account, epoch, predictionsContract, setIsRefundable])\r\n\r\n  return { isRefundable, setIsRefundable }\r\n}\r\n\r\nexport default useIsRefundable\r\n","import React from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Box, Flex, Heading, Text, PrizeIcon, BlockIcon } from '@pancakeswap/uikit'\r\nimport { useAppDispatch } from 'state'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useBetCanClaim } from 'state/hooks'\r\nimport styled from 'styled-components'\r\nimport { Bet, BetPosition } from 'state/types'\r\nimport { fetchBet } from 'state/predictions'\r\nimport { Result } from 'state/predictions/helpers'\r\nimport useIsRefundable from '../../hooks/useIsRefundable'\r\nimport { formatBnb, getPayout } from '../../helpers'\r\nimport CollectWinningsButton from '../CollectWinningsButton'\r\nimport PositionTag from '../PositionTag'\r\nimport ReclaimPositionButton from '../ReclaimPositionButton'\r\n\r\ninterface BetResultProps {\r\n  bet: Bet\r\n  result: Result\r\n}\r\n\r\nconst StyledBetResult = styled(Box)`\r\n  border: 2px solid ${({ theme }) => theme.colors.textDisabled};\r\n  border-radius: 16px;\r\n  margin-bottom: 24px;\r\n  padding: 16px;\r\n`\r\n\r\nconst BetResult: React.FC<BetResultProps> = ({ bet, result }) => {\r\n  const { t } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const { isRefundable } = useIsRefundable(bet.round.epoch)\r\n  // const bnbBusdPrice = usePriceBnbBusd()\r\n  const canClaim = useBetCanClaim(account, bet.round.id)\r\n\r\n  // Winners get the payout, otherwise the claim what they put it if it was canceled\r\n  const payout = result === Result.WIN ? getPayout(bet) : bet.amount\r\n\r\n  const getHeaderColor = () => {\r\n    switch (result) {\r\n      case Result.WIN:\r\n        return 'warning'\r\n      case Result.LOSE:\r\n        return 'textSubtle'\r\n      case Result.CANCELED:\r\n        return 'textDisabled'\r\n      default:\r\n        return 'text'\r\n    }\r\n  }\r\n\r\n  const getHeaderText = () => {\r\n    switch (result) {\r\n      case Result.WIN:\r\n        return t('Win')\r\n      case Result.LOSE:\r\n        return t('Lose')\r\n      case Result.CANCELED:\r\n        return t('Canceled')\r\n      default:\r\n        return ''\r\n    }\r\n  }\r\n\r\n  const getHeaderIcon = () => {\r\n    switch (result) {\r\n      case Result.WIN:\r\n        return <PrizeIcon color={getHeaderColor()} />\r\n      case Result.LOSE:\r\n      case Result.CANCELED:\r\n        return <BlockIcon color={getHeaderColor()} />\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  const getResultColor = () => {\r\n    switch (result) {\r\n      case Result.WIN:\r\n        return 'success'\r\n      case Result.LOSE:\r\n        return 'failure'\r\n      case Result.CANCELED:\r\n      default:\r\n        return 'text'\r\n    }\r\n  }\r\n\r\n  const handleSuccess = async () => {\r\n    await dispatch(fetchBet({ account, id: bet.id }))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n        <Heading>{t('Your History')}</Heading>\r\n        <Flex alignItems=\"center\">\r\n          <Heading as=\"h3\" color={getHeaderColor()} textTransform=\"uppercase\" bold mr=\"4px\">\r\n            {getHeaderText()}\r\n          </Heading>\r\n          {getHeaderIcon()}\r\n        </Flex>\r\n      </Flex>\r\n      <StyledBetResult>\r\n        {result === Result.WIN && !canClaim && (\r\n          <CollectWinningsButton\r\n            payout={payout}\r\n            roundId={bet.round.id}\r\n            epoch={bet.round.epoch}\r\n            hasClaimed={!canClaim}\r\n            width=\"100%\"\r\n            mb=\"16px\"\r\n            onSuccess={handleSuccess}\r\n          >\r\n            {t('Collect Winnings')}\r\n          </CollectWinningsButton>\r\n        )}\r\n        {result === Result.CANCELED && isRefundable && (\r\n          <ReclaimPositionButton epoch={bet.round.epoch} width=\"100%\" mb=\"16px\" />\r\n        )}\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n          <Text>{t('Your direction')}</Text>\r\n          <PositionTag betPosition={bet.position}>\r\n            {bet.position === BetPosition.BULL ? t('Up') : t('Down')}\r\n          </PositionTag>\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n          <Text>{t('Your position')}</Text>\r\n          <Text>{`${formatBnb(bet.amount)} BNB`}</Text>\r\n        </Flex>\r\n        <Flex alignItems=\"start\" justifyContent=\"space-between\">\r\n          <Text bold>{t('Your Result')}</Text>\r\n          <Box style={{ textAlign: 'right' }}>\r\n            <Text bold color={getResultColor()}>{`${result === Result.LOSE ? '-' : '+'}${formatBnb(payout)} BNB`}</Text>\r\n            <Text fontSize=\"12px\" color=\"textSubtle\">\r\n              120\r\n              {/* {`~$${formatBnb(bnbBusdPrice.times(payout).toNumber())}`} */}\r\n            </Text>\r\n          </Box>\r\n        </Flex>\r\n      </StyledBetResult>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default BetResult\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Bet } from 'state/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Flex, Text, Link, Heading } from '@pancakeswap/uikit'\r\nimport { Result } from 'state/predictions/helpers'\r\nimport { getMultiplier } from '../../helpers'\r\nimport { PayoutRow, RoundResult } from '../RoundResult'\r\nimport BetResult from './BetResult'\r\n\r\ninterface BetDetailsProps {\r\n  bet: Bet\r\n  result: Result\r\n}\r\n\r\nconst StyledBetDetails = styled.div`\r\n  background-color: ${({ theme }) => theme.colors.dropdown};\r\n  border-bottom: 2px solid ${({ theme }) => theme.colors.borderColor};\r\n  padding: 24px;\r\n`\r\n\r\nconst BetDetails: React.FC<BetDetailsProps> = ({ bet, result }) => {\r\n  const { t } = useTranslation()\r\n  const { totalAmount, bullAmount, bearAmount } = bet.round\r\n  const bullMultiplier = getMultiplier(totalAmount, bullAmount)\r\n  const bearMultiplier = getMultiplier(totalAmount, bearAmount)\r\n\r\n  return (\r\n    <StyledBetDetails>\r\n      {result === Result.CANCELED && (\r\n        <Text as=\"p\" color=\"failure\" mb=\"24px\">\r\n          {t(\r\n            'This round was automatically canceled due to an error. If you entered a position, please reclaim your funds below.',\r\n          )}\r\n        </Text>\r\n      )}\r\n      {result !== Result.LIVE && <BetResult bet={bet} result={result} />}\r\n      <Heading mb=\"8px\">{t('Round History')}</Heading>\r\n      <RoundResult round={bet.round} mb=\"24px\">\r\n        <PayoutRow positionLabel={t('Up')} multiplier={bullMultiplier} amount={bullAmount} />\r\n        <PayoutRow positionLabel={t('Down')} multiplier={bearMultiplier} amount={bearAmount} />\r\n      </RoundResult>\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n        <Text>{t('Opening Block')}</Text>\r\n        <Link href={`https://bscscan.com/block/${bet.round.lockBlock}`} external>\r\n          {bet.round.lockBlock}\r\n        </Link>\r\n      </Flex>\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n        <Text>{t('Closing Block')}</Text>\r\n        <Link href={`https://bscscan.com/block/${bet.round.endBlock}`} external>\r\n          {bet.round.endBlock}\r\n        </Link>\r\n      </Flex>\r\n    </StyledBetDetails>\r\n  )\r\n}\r\n\r\nexport default BetDetails\r\n","import React, { useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport {\r\n  Box,\r\n  ChevronDownIcon,\r\n  ChevronUpIcon,\r\n  Flex,\r\n  IconButton,\r\n  PlayCircleOutlineIcon,\r\n  Text,\r\n  WaitIcon,\r\n} from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { Bet, PredictionStatus } from 'state/types'\r\nimport { useBetCanClaim, useGetCurrentEpoch, useGetPredictionsStatus } from 'state/hooks'\r\nimport { getRoundResult, Result } from 'state/predictions/helpers'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { formatBnb, getPayout } from '../../helpers'\r\nimport CollectWinningsButton from '../CollectWinningsButton'\r\nimport ReclaimPositionButton from '../ReclaimPositionButton'\r\nimport BetDetails from './BetDetails'\r\n\r\ninterface BetProps {\r\n  bet: Bet\r\n}\r\n\r\nconst StyledBet = styled(Flex).attrs({ alignItems: 'center', p: '16px' })`\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  border-bottom: 2px solid ${({ theme }) => theme.colors.borderColor};\r\n  cursor: pointer;\r\n`\r\n\r\nconst YourResult = styled(Box)`\r\n  flex: 1;\r\n`\r\n\r\nconst HistoricalBet: React.FC<BetProps> = ({ bet }) => {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const { amount, round } = bet\r\n\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const status = useGetPredictionsStatus()\r\n\r\n  const toggleOpen = () => setIsOpen(!isOpen)\r\n\r\n  const getRoundColor = (result) => {\r\n    switch (result) {\r\n      case Result.WIN:\r\n        return 'success'\r\n      case Result.LOSE:\r\n        return 'failure'\r\n      case Result.CANCELED:\r\n        return 'textDisabled'\r\n      default:\r\n        return 'text'\r\n    }\r\n  }\r\n\r\n  const getRoundPrefix = (result) => {\r\n    if (result === Result.LOSE) {\r\n      return '-'\r\n    }\r\n\r\n    if (result === Result.WIN) {\r\n      return '+'\r\n    }\r\n\r\n    return ''\r\n  }\r\n\r\n  const roundResult = getRoundResult(bet, currentEpoch)\r\n  const resultTextColor = getRoundColor(roundResult)\r\n  const resultTextPrefix = getRoundPrefix(roundResult)\r\n  const isOpenRound = round.epoch === currentEpoch\r\n  const isLiveRound = status === PredictionStatus.LIVE && round.epoch === currentEpoch - 1\r\n  const canClaim = useBetCanClaim(account, bet.round.id)\r\n\r\n  // Winners get the payout, otherwise the claim what they put it if it was canceled\r\n  const payout = roundResult === Result.WIN ? getPayout(bet) : amount\r\n\r\n  const renderBetLabel = () => {\r\n    if (isOpenRound) {\r\n      return (\r\n        <Flex alignItems=\"center\">\r\n          <WaitIcon color=\"primary\" mr=\"6px\" width=\"24px\" />\r\n          <Text color=\"primary\" bold>\r\n            {t('Starting Soon')}\r\n          </Text>\r\n        </Flex>\r\n      )\r\n    }\r\n\r\n    if (isLiveRound) {\r\n      return (\r\n        <Flex alignItems=\"center\">\r\n          <PlayCircleOutlineIcon color=\"secondary\" mr=\"6px\" width=\"24px\" />\r\n          <Text color=\"secondary\" bold>\r\n            {t('Live Now')}\r\n          </Text>\r\n        </Flex>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <Text fontSize=\"12px\" color=\"textSubtle\">\r\n          {t('Your Result')}\r\n        </Text>\r\n        <Text bold color={resultTextColor} lineHeight={1}>\r\n          {roundResult === Result.CANCELED ? t('Canceled') : `${resultTextPrefix}${formatBnb(payout)}`}\r\n        </Text>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <StyledBet onClick={toggleOpen} role=\"button\">\r\n        <Box width=\"48px\">\r\n          <Text textAlign=\"center\">\r\n            <Text fontSize=\"12px\" color=\"textSubtle\">\r\n              {t('Round')}\r\n            </Text>\r\n            <Text bold lineHeight={1}>\r\n              {round.epoch.toLocaleString()}\r\n            </Text>\r\n          </Text>\r\n        </Box>\r\n        <YourResult px=\"24px\">{renderBetLabel()}</YourResult>\r\n        {roundResult === Result.WIN && canClaim && (\r\n          <CollectWinningsButton\r\n            hasClaimed={!canClaim}\r\n            roundId={bet.round.id}\r\n            epoch={bet.round.epoch}\r\n            payout={payout}\r\n            scale=\"sm\"\r\n            mr=\"8px\"\r\n          >\r\n            {t('Collect')}\r\n          </CollectWinningsButton>\r\n        )}\r\n        {roundResult === Result.CANCELED && canClaim && (\r\n          <ReclaimPositionButton epoch={bet.round.epoch} scale=\"sm\" mr=\"8px\">\r\n            {t('Reclaim')}\r\n          </ReclaimPositionButton>\r\n        )}\r\n        {!isOpenRound && !isLiveRound && (\r\n          <IconButton variant=\"text\" scale=\"sm\">\r\n            {isOpen ? <ChevronUpIcon /> : <ChevronDownIcon />}\r\n          </IconButton>\r\n        )}\r\n      </StyledBet>\r\n      {isOpen && <BetDetails bet={bet} result={getRoundResult(bet, currentEpoch)} />}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default HistoricalBet\r\n","import React from 'react'\r\nimport { orderBy } from 'lodash'\r\nimport { Box, Heading, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Bet } from 'state/types'\r\nimport HistoricalBet from './HistoricalBet'\r\n\r\ninterface RoundsTabProps {\r\n  hasBetHistory: boolean\r\n  bets: Bet[]\r\n}\r\n\r\nconst RoundsTab: React.FC<RoundsTabProps> = ({ hasBetHistory, bets }) => {\r\n  const { t } = useTranslation()\r\n\r\n  return hasBetHistory ? (\r\n    <>\r\n      {orderBy(bets, ['round.epoch'], ['desc']).map((bet) => (\r\n        <HistoricalBet key={bet.id} bet={bet} />\r\n      ))}\r\n    </>\r\n  ) : (\r\n    <Box p=\"24px\">\r\n      <Heading size=\"lg\" textAlign=\"center\" mb=\"8px\">\r\n        {t('No prediction history available')}\r\n      </Heading>\r\n      <Text as=\"p\" textAlign=\"center\">\r\n        {t(\r\n          'If you are sure you should see history here, make sure you’re connected to the correct wallet and try again.',\r\n        )}\r\n      </Text>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default RoundsTab\r\n","// @ts-nocheck\r\n/**\r\n * There is ts-nocheck at the top of this file for the following reasons:\r\n * 1. You can't ignore block in TS at the moment https://stackoverflow.com/questions/51145180/how-to-use-ts-ignore-for-a-block\r\n * 2. Interpolations in keyframes are indeed supported and work fine https://github.com/styled-components/styled-components/issues/2263\r\n * But TypeScript definitions are not updated to reflect that - https://github.com/DefinitelyTyped/DefinitelyTyped/issues/48907\r\n * 3. Since this error is in the middle of a template string there is no way to add @ts-ignore on just that one line\r\n * without also messing prettier.\r\n *\r\n * I'll leave TODO: comment here to check back later if there is update to types\r\n *\r\n */\r\nimport styled, { keyframes } from 'styled-components'\r\n\r\ninterface SliceProps {\r\n  length: number\r\n  offset?: number\r\n}\r\n\r\nexport const DrawAnimation = keyframes`\r\n  from {\r\n    stroke-dasharray: 0, 339.292\r\n  }\r\n  to {\r\n    stroke-dasharray: ${({ length }: SliceProps) => length} 339.292;\r\n  }\r\n`\r\n\r\nexport const OffsetAnimation = keyframes`\r\n  from {\r\n    stroke-dashoffset: 0\r\n  }\r\n  to {\r\n    stroke-dashoffset: ${(props) => -props.offset};\r\n  }\r\n`\r\n\r\nexport const SVG = styled.svg`\r\n  width: 128px;\r\n  height: 128px;\r\n  transform: rotate(-90deg);\r\n`\r\n\r\nconst DefaultSlice = styled.circle<SliceProps>`\r\n  fill: none;\r\n  stroke-width: 16;\r\n  stroke-dasharray: ${(props) => `${props.length} 339.292`};\r\n`\r\n\r\nexport const LostSlice = styled(DefaultSlice)`\r\n  stroke: #ed4b9e;\r\n  animation: ${DrawAnimation} 1s ease;\r\n`\r\n\r\nexport const WonSlice = styled(DefaultSlice)`\r\n  stroke: #31d0aa;\r\n  stroke-dashoffset: ${(props) => -props.offset};\r\n  animation: ${DrawAnimation} 1s ease, ${OffsetAnimation} 1s ease;\r\n`\r\n\r\nexport const Wrapper = styled.div`\r\n  position: relative;\r\n  width: 128px;\r\n  height: 128px;\r\n`\r\n\r\nexport const Info = styled.div`\r\n  width: 128px;\r\n  height: 128px;\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  z-index: 2;\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\n","import React from 'react'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Text } from '@pancakeswap/uikit'\r\nimport { SVG, WonSlice, LostSlice, Wrapper, Info } from './PnlChartStyles'\r\n\r\n/**\r\n * Bare minimum chart that doesn't require any external dependencies\r\n * For details read here - https://www.smashingmagazine.com/2015/07/designing-simple-pie-charts-with-css/\r\n */\r\n\r\ninterface PnlChartProps {\r\n  won: number\r\n  lost: number\r\n}\r\n\r\n// 2 * Pi * R\r\nconst CIRCUMFERENCE = 339.292\r\n\r\nconst PnlChart: React.FC<PnlChartProps> = ({ lost, won }) => {\r\n  const { t } = useTranslation()\r\n  const percentageWon = ((won * 100) / (lost + won)).toFixed(2)\r\n  const paintLost = (lost / (won + lost)) * CIRCUMFERENCE\r\n  const paintWon = CIRCUMFERENCE - paintLost\r\n  return (\r\n    <Wrapper>\r\n      <SVG viewBox=\"0 0 128 128\">\r\n        <LostSlice r=\"54\" cx=\"64\" cy=\"64\" length={paintLost} />\r\n        <WonSlice r=\"54\" cx=\"64\" cy=\"64\" length={paintWon} offset={paintLost} />\r\n      </SVG>\r\n      <Info>\r\n        <Text small lineHeight=\"1\">\r\n          {t('Won')}\r\n        </Text>\r\n        <Text bold fontSize=\"20px\" lineHeight=\"1\">\r\n          {won}/{won + lost}\r\n        </Text>\r\n        <Text small lineHeight=\"1\" color=\"textSubtle\">\r\n          {percentageWon}%\r\n        </Text>\r\n      </Info>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default PnlChart\r\n","import React from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Flex, Text } from '@pancakeswap/uikit'\r\nimport { formatBnb } from 'views/Predictions/helpers'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ntype SummaryType = 'won' | 'lost' | 'entered'\r\n\r\ninterface SummaryRowProps {\r\n  type: SummaryType\r\n  summary: any\r\n  bnbBusdPrice: BigNumber\r\n}\r\n\r\nconst summaryTypeColors = {\r\n  won: 'success',\r\n  lost: 'failure',\r\n  entered: 'text',\r\n}\r\n\r\nconst summaryTypeSigns = {\r\n  won: '+',\r\n  lost: '-',\r\n  entered: '',\r\n}\r\n\r\nconst SummaryRow: React.FC<SummaryRowProps> = ({ type, summary, bnbBusdPrice }) => {\r\n  const { t } = useTranslation()\r\n\r\n  const color = summaryTypeColors[type]\r\n  const { rounds, amount } = summary[type]\r\n  const totalRounds = summary.entered.rounds\r\n  const roundsInPercents = ((rounds * 100) / totalRounds).toFixed(2)\r\n  const typeTranslationKey = type.charAt(0).toUpperCase() + type.slice(1)\r\n  const displayAmount = type === 'won' ? summary[type].payout : amount\r\n\r\n  return (\r\n    <>\r\n      <Text mt=\"16px\" bold color=\"textSubtle\">\r\n        {t(typeTranslationKey)}\r\n      </Text>\r\n      <Flex>\r\n        <Flex flex=\"2\" flexDirection=\"column\">\r\n          <Text bold fontSize=\"20px\" color={color}>\r\n            {rounds} {t('Rounds').toLocaleLowerCase()}\r\n          </Text>\r\n          <Text fontSize=\"12px\" color=\"textSubtle\">\r\n            {type === 'entered' ? t('Total').toLocaleLowerCase() : `${roundsInPercents}%`}\r\n          </Text>\r\n        </Flex>\r\n        <Flex flex=\"3\" flexDirection=\"column\">\r\n          <Text bold fontSize=\"20px\" color={color}>\r\n            {`${summaryTypeSigns[type]}${formatBnb(displayAmount)} BNB`}\r\n          </Text>\r\n          <Text fontSize=\"12px\" color=\"textSubtle\">\r\n            {`~$${formatBnb(bnbBusdPrice.times(displayAmount).toNumber())}`}\r\n          </Text>\r\n        </Flex>\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SummaryRow\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Box, Flex, Heading, Text, Button, Link, OpenNewIcon } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useGetCurrentEpoch, usePriceBnbBusd } from 'state/hooks'\r\nimport { Bet, BetPosition } from 'state/types'\r\nimport { formatBnb, getMultiplier, getPayout } from 'views/Predictions/helpers'\r\nimport { getRoundResult, Result } from 'state/predictions/helpers'\r\nimport PnlChart from './PnlChart'\r\nimport SummaryRow from './SummaryRow'\r\n\r\ninterface PnlTabProps {\r\n  hasBetHistory: boolean\r\n  bets: Bet[]\r\n}\r\n\r\ninterface PnlCategory {\r\n  rounds: number\r\n  amount: number\r\n}\r\n\r\ninterface PnlSummary {\r\n  won: PnlCategory & { payout: number; bestRound: { id: string; payout: number; multiplier: number } }\r\n  lost: PnlCategory\r\n  entered: PnlCategory\r\n}\r\n\r\nconst TREASURY_FEE = 0.03\r\n\r\nconst getNetPayout = (bet: Bet) => {\r\n  const rawPayout = getPayout(bet)\r\n  const fee = rawPayout * TREASURY_FEE\r\n  return rawPayout - fee - bet.amount\r\n}\r\n\r\nconst Divider = styled.div`\r\n  background-color: ${({ theme }) => theme.colors.backgroundDisabled};\r\n  height: 1px;\r\n  margin: 24px auto;\r\n  width: 100%;\r\n`\r\n\r\nconst initialPnlSummary: PnlSummary = {\r\n  won: {\r\n    rounds: 0,\r\n    amount: 0,\r\n    payout: 0, // net payout after all deductions\r\n    bestRound: {\r\n      id: '0',\r\n      payout: 0, // net payout after all deductions\r\n      multiplier: 0,\r\n    },\r\n  },\r\n  lost: {\r\n    rounds: 0,\r\n    amount: 0,\r\n  },\r\n  entered: {\r\n    rounds: 0,\r\n    amount: 0,\r\n  },\r\n}\r\n\r\nconst getPnlSummary = (bets: Bet[], currentEpoch: number): PnlSummary => {\r\n  return bets.reduce((summary: PnlSummary, bet) => {\r\n    const roundResult = getRoundResult(bet, currentEpoch)\r\n    if (roundResult === Result.WIN) {\r\n      const payout = getNetPayout(bet)\r\n      let { bestRound } = summary.won\r\n      if (payout > bestRound.payout) {\r\n        const { bullAmount, bearAmount, totalAmount } = bet.round\r\n        const multiplier = getMultiplier(totalAmount, bet.position === BetPosition.BULL ? bullAmount : bearAmount)\r\n        bestRound = { id: bet.round.id, payout, multiplier }\r\n      }\r\n      return {\r\n        won: {\r\n          rounds: summary.won.rounds + 1,\r\n          amount: summary.won.amount + bet.amount,\r\n          payout: summary.won.payout + payout,\r\n          bestRound,\r\n        },\r\n        entered: {\r\n          rounds: summary.entered.rounds + 1,\r\n          amount: summary.entered.amount + bet.amount,\r\n        },\r\n        lost: summary.lost,\r\n      }\r\n    }\r\n    if (roundResult === Result.LOSE) {\r\n      return {\r\n        lost: {\r\n          rounds: summary.lost.rounds + 1,\r\n          amount: summary.lost.amount + bet.amount,\r\n        },\r\n        entered: {\r\n          rounds: summary.entered.rounds + 1,\r\n          amount: summary.entered.amount + bet.amount,\r\n        },\r\n        won: summary.won,\r\n      }\r\n    }\r\n    // Ignore Canceled and Live rounds\r\n    return summary\r\n  }, initialPnlSummary)\r\n}\r\n\r\nconst PnlTab: React.FC<PnlTabProps> = ({ hasBetHistory, bets }) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const bnbBusdPrice = usePriceBnbBusd()\r\n\r\n  const summary = getPnlSummary(bets, currentEpoch)\r\n  const netResultAmount = summary.won.payout - summary.lost.amount\r\n  const netResultIsPositive = netResultAmount > 0\r\n  const avgPositionEntered = summary.entered.amount / summary.entered.rounds\r\n  const avgBnbWonPerRound = netResultAmount / summary.entered.rounds\r\n  const avgBnbWonIsPositive = avgBnbWonPerRound > 0\r\n\r\n  // Guard in case user has only lost rounds\r\n  const hasBestRound = summary.won.bestRound.payout !== 0\r\n\r\n  return hasBetHistory ? (\r\n    <Box p=\"16px\">\r\n      <Text bold fontSize=\"24px\" color=\"secondary\" pb=\"24px\">\r\n        {t('Your history')}\r\n      </Text>\r\n      <Flex>\r\n        <PnlChart lost={summary.lost.rounds} won={summary.won.rounds} />\r\n        <Flex flexDirection=\"column\" justifyContent=\"center\" pl=\"24px\">\r\n          <Text bold color=\"textSubtle\">\r\n            {t('Net results')}\r\n          </Text>\r\n          <Text bold fontSize=\"24px\" lineHeight=\"1\" color={netResultIsPositive ? 'success' : 'failure'}>\r\n            {`${netResultIsPositive ? '+' : ''}${formatBnb(netResultAmount)} BNB`}\r\n          </Text>\r\n          <Text small color=\"textSubtle\">\r\n            {`~$${formatBnb(bnbBusdPrice.times(netResultAmount).toNumber())}`}\r\n          </Text>\r\n        </Flex>\r\n      </Flex>\r\n      <Box pl=\"8px\">\r\n        <Text mt=\"24px\" bold color=\"textSubtle\">\r\n          {t('Average return / round')}\r\n        </Text>\r\n        <Text bold color={avgBnbWonIsPositive ? 'success' : 'failure'}>\r\n          {`${avgBnbWonIsPositive ? '+' : ''}${formatBnb(avgBnbWonPerRound)} BNB`}\r\n        </Text>\r\n        <Text small color=\"textSubtle\">\r\n          {`~$${formatBnb(bnbBusdPrice.times(avgBnbWonPerRound).toNumber())}`}\r\n        </Text>\r\n\r\n        {hasBestRound && (\r\n          <>\r\n            <Text mt=\"16px\" bold color=\"textSubtle\">\r\n              {t('Best round: #%roundId%', { roundId: summary.won.bestRound.id })}\r\n            </Text>\r\n            <Flex alignItems=\"flex-end\">\r\n              <Text bold color=\"success\">{`+${formatBnb(summary.won.bestRound.payout)} BNB`}</Text>\r\n              <Text ml=\"4px\" small color=\"textSubtle\">\r\n                ({summary.won.bestRound.multiplier.toFixed(2)}x)\r\n              </Text>\r\n            </Flex>\r\n            <Text small color=\"textSubtle\">\r\n              {`~$${formatBnb(bnbBusdPrice.times(summary.won.bestRound.payout).toNumber())}`}\r\n            </Text>\r\n          </>\r\n        )}\r\n\r\n        <Text mt=\"16px\" bold color=\"textSubtle\">\r\n          {t('Average position entered / round')}\r\n        </Text>\r\n        <Text bold>{`${formatBnb(avgPositionEntered)} BNB`}</Text>\r\n        <Text small color=\"textSubtle\">\r\n          {`~$${formatBnb(bnbBusdPrice.times(avgPositionEntered).toNumber())}`}\r\n        </Text>\r\n\r\n        <Divider />\r\n\r\n        <SummaryRow type=\"won\" summary={summary} bnbBusdPrice={bnbBusdPrice} />\r\n        <SummaryRow type=\"lost\" summary={summary} bnbBusdPrice={bnbBusdPrice} />\r\n        <SummaryRow type=\"entered\" summary={summary} bnbBusdPrice={bnbBusdPrice} />\r\n\r\n        <Flex justifyContent=\"center\" mt=\"24px\">\r\n          <Link href={`https://bscscan.com/address/${account}#internaltx`} mb=\"16px\" external>\r\n            <Button mt=\"8px\" width=\"100%\">\r\n              {t('View Reclaimed & Won')}\r\n              <OpenNewIcon color=\"white\" ml=\"4px\" />\r\n            </Button>\r\n          </Link>\r\n        </Flex>\r\n      </Box>\r\n    </Box>\r\n  ) : (\r\n    <Box p=\"24px\">\r\n      <Heading size=\"lg\" textAlign=\"center\" mb=\"8px\">\r\n        {t('No prediction history available')}\r\n      </Heading>\r\n      <Text as=\"p\" textAlign=\"center\">\r\n        {t(\r\n          'If you are sure you should see history here, make sure you’re connected to the correct wallet and try again.',\r\n        )}\r\n      </Text>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default PnlTab\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Flex, Spinner, Text } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport styled from 'styled-components'\r\nimport UnlockButton from 'components/UnlockButton'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { fetchHistory } from 'state/predictions'\r\nimport { getUnclaimedWinningBets } from 'state/predictions/helpers'\r\nimport { HistoryFilter } from 'state/types'\r\nimport { useAppDispatch } from 'state'\r\nimport {\r\n  useGetCurrentEpoch,\r\n  useGetHistoryByAccount,\r\n  useGetHistoryFilter,\r\n  useGetIsFetchingHistory,\r\n  useIsHistoryPaneOpen,\r\n} from 'state/hooks'\r\nimport { Header, HistoryTabs } from './components/History'\r\nimport RoundsTab from './components/History/RoundsTab'\r\nimport PnlTab from './components/History/PnlTab/PnlTab'\r\n\r\nconst StyledHistory = styled.div`\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n`\r\n\r\nconst BetWrapper = styled.div`\r\n  flex: 1;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  position: relative;\r\n`\r\n\r\nconst SpinnerWrapper = styled.div`\r\n  align-items: center;\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  display: flex;\r\n  left: 0;\r\n  height: 100%;\r\n  justify-content: center;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n`\r\n\r\nconst History = () => {\r\n  const { account } = useWeb3React()\r\n  const dispatch = useAppDispatch()\r\n  const isHistoryPaneOpen = useIsHistoryPaneOpen()\r\n  const isFetchingHistory = useGetIsFetchingHistory()\r\n  const historyFilter = useGetHistoryFilter()\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const { t } = useTranslation()\r\n  const bets = useGetHistoryByAccount(account)\r\n  const [activeTab, setActiveTab] = useState(HistoryTabs.ROUNDS)\r\n\r\n  useEffect(() => {\r\n    if (account && isHistoryPaneOpen) {\r\n      dispatch(fetchHistory({ account }))\r\n    }\r\n  }, [account, currentEpoch, isHistoryPaneOpen, dispatch])\r\n\r\n  // Currently the api cannot filter by unclaimed AND won so we do it here\r\n  // when the user has selected Uncollected only include positions they won\r\n  const results = historyFilter === HistoryFilter.UNCOLLECTED ? getUnclaimedWinningBets(bets) : bets\r\n\r\n  const hasBetHistory = results && results.length > 0\r\n\r\n  let activeTabComponent = null\r\n\r\n  switch (activeTab) {\r\n    case HistoryTabs.PNL:\r\n      activeTabComponent = <PnlTab hasBetHistory={hasBetHistory} bets={results} />\r\n      break\r\n    case HistoryTabs.ROUNDS:\r\n    default:\r\n      activeTabComponent = <RoundsTab hasBetHistory={hasBetHistory} bets={results} />\r\n      break\r\n  }\r\n\r\n  if (!account) {\r\n    activeTabComponent = (\r\n      <Flex justifyContent=\"center\" alignItems=\"center\" flexDirection=\"column\" mt=\"32px\">\r\n        <UnlockButton />\r\n        <Text mt=\"8px\">{t('Connect your wallet to view your prediction history')}</Text>\r\n      </Flex>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <StyledHistory>\r\n      <Header activeTab={activeTab} setActiveTab={setActiveTab} />\r\n      <BetWrapper>\r\n        {isFetchingHistory ? (\r\n          <SpinnerWrapper>\r\n            <Spinner size={72} />\r\n          </SpinnerWrapper>\r\n        ) : (\r\n          activeTabComponent\r\n        )}\r\n      </BetWrapper>\r\n    </StyledHistory>\r\n  )\r\n}\r\n\r\nexport default History\r\n","import React from 'react'\r\nimport { useTheme } from 'styled-components'\r\nimport { Svg, SvgProps } from '@pancakeswap/uikit'\r\n\r\ninterface MultiplierProps extends SvgProps {\r\n  isActive: boolean\r\n}\r\n\r\nexport const RoundMultiplierDownArrow: React.FC<MultiplierProps> = ({ isActive, ...props }) => {\r\n  const theme = useTheme()\r\n  const fill = theme.colors[isActive ? 'failure' : 'tertiary']\r\n\r\n  return (\r\n    <Svg height=\"65px\" width=\"240px\" viewBox=\"0 0 240 65\" {...props}>\r\n      <g filter=\"url(#filter0_i)\">\r\n        <path\r\n          d=\"M10.0001 15.7243L10.0003 1H234L234 15.7247C234 22.4864 229.749 28.5181 223.381 30.7923L138.48 61.1141C127.823 64.9203 116.177 64.9203 105.519 61.1141L20.6188 30.7924C14.2508 28.5181 10.0001 22.4862 10.0001 15.7243Z\"\r\n          fill={fill}\r\n        />\r\n      </g>\r\n      <defs>\r\n        <filter\r\n          id=\"filter0_i\"\r\n          x=\"10.0001\"\r\n          y=\"1\"\r\n          width=\"224\"\r\n          height=\"62.9688\"\r\n          filterUnits=\"userSpaceOnUse\"\r\n          colorInterpolationFilters=\"sRGB\"\r\n        >\r\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\r\n          <feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"BackgroundImageFix\" result=\"shape\" />\r\n          <feColorMatrix\r\n            in=\"SourceAlpha\"\r\n            type=\"matrix\"\r\n            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\r\n            result=\"hardAlpha\"\r\n          />\r\n          <feOffset />\r\n          <feGaussianBlur stdDeviation=\"1\" />\r\n          <feComposite in2=\"hardAlpha\" operator=\"arithmetic\" k2=\"-1\" k3=\"1\" />\r\n          <feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0\" />\r\n          <feBlend mode=\"normal\" in2=\"shape\" result=\"effect1_innerShadow\" />\r\n        </filter>\r\n      </defs>\r\n    </Svg>\r\n  )\r\n}\r\n\r\nexport const RoundMultiplierUpArrow: React.FC<MultiplierProps> = ({ isActive, ...props }) => {\r\n  const theme = useTheme()\r\n  const fill = theme.colors[isActive ? 'success' : 'tertiary']\r\n\r\n  return (\r\n    <Svg height=\"65px\" width=\"240px\" viewBox=\"0 0 240 65\" {...props}>\r\n      <g filter=\"url(#filter0_i)\">\r\n        <path\r\n          d=\"M10.0001 49.2757L10.0003 64H234L234 49.2753C234 42.5136 229.749 36.4819 223.381 34.2077L138.48 3.8859C127.823 0.0796983 116.177 0.0796931 105.519 3.8859L20.6188 34.2076C14.2508 36.4819 10.0001 42.5138 10.0001 49.2757Z\"\r\n          fill={fill}\r\n        />\r\n      </g>\r\n      <defs>\r\n        <filter\r\n          id=\"filter0_i\"\r\n          x=\"10.0001\"\r\n          y=\"1.03125\"\r\n          width=\"224\"\r\n          height=\"62.9688\"\r\n          filterUnits=\"userSpaceOnUse\"\r\n          colorInterpolationFilters=\"sRGB\"\r\n        >\r\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\r\n          <feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"BackgroundImageFix\" result=\"shape\" />\r\n          <feColorMatrix\r\n            in=\"SourceAlpha\"\r\n            type=\"matrix\"\r\n            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\r\n            result=\"hardAlpha\"\r\n          />\r\n          <feOffset />\r\n          <feGaussianBlur stdDeviation=\"1\" />\r\n          <feComposite in2=\"hardAlpha\" operator=\"arithmetic\" k2=\"-1\" k3=\"1\" />\r\n          <feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0\" />\r\n          <feBlend mode=\"normal\" in2=\"shape\" result=\"effect1_innerShadow\" />\r\n        </filter>\r\n      </defs>\r\n    </Svg>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { CheckmarkCircleIcon, Tag, useTooltip } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { formatBnb } from '../../helpers'\r\n\r\ninterface EnteredTagProps {\r\n  amount?: number\r\n}\r\n\r\nconst StyledEnteredTag = styled(Tag).attrs({\r\n  variant: 'secondary',\r\n  startIcon: <CheckmarkCircleIcon width=\"18px\" />,\r\n})`\r\n  font-weight: bold;\r\n  text-transform: uppercase;\r\n`\r\n\r\nconst EnteredTag: React.FC<EnteredTagProps> = ({ amount }) => {\r\n  const { t } = useTranslation()\r\n  const { targetRef, tooltipVisible, tooltip } = useTooltip(\r\n    <div style={{ whiteSpace: 'nowrap' }}>{`${formatBnb(amount)} BNB`}</div>,\r\n    { placement: 'bottom' },\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <span ref={targetRef}>\r\n        <StyledEnteredTag>{t('Entered')}</StyledEnteredTag>{' '}\r\n      </span>{' '}\r\n      {tooltipVisible && tooltip}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default EnteredTag\r\n","import React from 'react'\r\nimport styled, { CSSProperties } from 'styled-components'\r\nimport { Box, Flex, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { BetPosition } from 'state/types'\r\nimport { RoundMultiplierDownArrow, RoundMultiplierUpArrow } from '../../RoundMultiplierArrows'\r\nimport EnteredTag from './EnteredTag'\r\n\r\ninterface MultiplierArrowProps {\r\n  betAmount?: number\r\n  multiplier?: number\r\n  hasEntered?: boolean\r\n  betPosition?: BetPosition\r\n  isDisabled?: boolean\r\n  isActive?: boolean\r\n}\r\n\r\nconst ArrowWrapper = styled.div`\r\n  height: 65px;\r\n  margin: 0 auto;\r\n  width: 240px;\r\n`\r\n\r\nconst Content = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  left: 0;\r\n  height: 100%;\r\n  justify-content: center;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n`\r\n\r\nconst EnteredTagWrapper = styled.div`\r\n  position: absolute;\r\n  z-index: 10;\r\n`\r\n\r\nconst getTextColor =\r\n  (fallback = 'textSubtle') =>\r\n  (isActive: boolean, isDisabled: boolean) => {\r\n    if (isDisabled) {\r\n      return 'textDisabled'\r\n    }\r\n\r\n    if (isActive) {\r\n      return 'white'\r\n    }\r\n\r\n    return fallback\r\n  }\r\n\r\nconst MultiplierArrow: React.FC<MultiplierArrowProps> = ({\r\n  betAmount,\r\n  multiplier,\r\n  hasEntered = false,\r\n  betPosition = BetPosition.BULL,\r\n  isDisabled = false,\r\n  isActive = false,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const upColor = getTextColor('success')(isActive, isDisabled)\r\n  const downColor = getTextColor('failure')(isActive, isDisabled)\r\n  const textColor = getTextColor()(isActive, isDisabled)\r\n  const multiplierText = (\r\n    <Box>\r\n      <Flex justifyContent=\"center\" height=\"14px\">\r\n        <Text fontSize=\"14px\" color={textColor} bold lineHeight=\"14x\">\r\n          {multiplier !== undefined ? `${multiplier.toLocaleString(undefined, { maximumFractionDigits: 2 })}x` : '-'}\r\n        </Text>\r\n        <Text fontSize=\"14px\" color={textColor} lineHeight=\"14x\" ml=\"4px\">\r\n          {t('Payout')}\r\n        </Text>\r\n      </Flex>\r\n    </Box>\r\n  )\r\n\r\n  const getEnteredTag = (position: CSSProperties) => {\r\n    if (!hasEntered) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <EnteredTagWrapper style={position}>\r\n        <EnteredTag amount={betAmount} />\r\n      </EnteredTagWrapper>\r\n    )\r\n  }\r\n\r\n  if (betPosition === BetPosition.BEAR) {\r\n    return (\r\n      <Box position=\"relative\">\r\n        <ArrowWrapper>\r\n          <RoundMultiplierDownArrow isActive={isActive} />\r\n          {getEnteredTag({ bottom: 0, right: 0 })}\r\n          <Content>\r\n            {!isDisabled && multiplierText}\r\n            <Text bold fontSize=\"20px\" mb=\"8px\" color={downColor} textTransform=\"uppercase\">\r\n              {t('Down')}\r\n            </Text>\r\n          </Content>\r\n        </ArrowWrapper>\r\n      </Box>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Box position=\"relative\">\r\n      <ArrowWrapper>\r\n        <RoundMultiplierUpArrow isActive={isActive} />\r\n        {getEnteredTag({ top: 0, left: 0 })}\r\n        <Content>\r\n          <Text bold fontSize=\"20px\" lineHeight=\"21px\" color={upColor} textTransform=\"uppercase\">\r\n            {t('Up')}\r\n          </Text>\r\n          {!isDisabled && multiplierText}\r\n        </Content>\r\n      </ArrowWrapper>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default MultiplierArrow\r\n","import styled from 'styled-components'\r\nimport { Card as UIKitCard } from '@pancakeswap/uikit'\r\n\r\nconst Card = styled(UIKitCard)`\r\n  border-radius: 16px;\r\n`\r\n\r\nexport default Card\r\n","import React, { ReactElement } from 'react'\r\nimport { Flex, Text } from '@pancakeswap/uikit'\r\nimport styled, { DefaultTheme } from 'styled-components'\r\n\r\ntype Status = 'expired' | 'live' | 'next' | 'soon' | 'canceled' | 'calculating'\r\n\r\ninterface CardHeaderProps {\r\n  status: Status\r\n  title: string\r\n  epoch: number\r\n  blockNumber: number\r\n  icon?: ReactElement\r\n}\r\n\r\nconst getBackgroundColor = (theme: DefaultTheme, status: Status) => {\r\n  switch (status) {\r\n    case 'calculating':\r\n      return theme.colors.gradients.cardHeader\r\n    case 'live':\r\n      return 'transparent'\r\n    case 'canceled':\r\n      return theme.colors.warning\r\n    case 'next':\r\n      return theme.colors.secondary\r\n    case 'expired':\r\n    case 'soon':\r\n    default:\r\n      return theme.colors.borderColor\r\n  }\r\n}\r\n\r\ntype TextColor = 'textDisabled' | 'white' | 'secondary' | 'text' | 'textSubtle'\r\ntype FallbackColor = 'text' | 'textSubtle'\r\n\r\nconst getTextColorByStatus = (status: Status, fallback: FallbackColor): TextColor => {\r\n  switch (status) {\r\n    case 'expired':\r\n      return 'textDisabled'\r\n    case 'next':\r\n      return 'white'\r\n    case 'live':\r\n      return 'secondary'\r\n    case 'canceled':\r\n    case 'calculating':\r\n      return 'text'\r\n    default:\r\n      return fallback\r\n  }\r\n}\r\n\r\nconst StyledCardHeader = styled.div<{ status: Status }>`\r\n  align-items: center;\r\n  background: ${({ theme, status }) => getBackgroundColor(theme, status)};\r\n  border-radius: 16px 16px 0 0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: ${({ status }) => (status === 'live' ? '16px' : '8px')};\r\n`\r\n\r\nconst Round = styled.div`\r\n  justify-self: center;\r\n`\r\n\r\nconst CardHeader: React.FC<CardHeaderProps> = ({ status, title, epoch, icon }) => {\r\n  const textColor = getTextColorByStatus(status, 'text')\r\n  const isLive = status === 'live'\r\n\r\n  return (\r\n    <StyledCardHeader status={status}>\r\n      <Flex alignItems=\"center\">\r\n        {icon}\r\n        <Text color={textColor} bold={isLive} textTransform={isLive ? 'uppercase' : 'capitalize'} lineHeight=\"21px\">\r\n          {title}\r\n        </Text>\r\n      </Flex>\r\n      <Round>\r\n        <Text fontSize={isLive ? '14px' : '12px'} color={getTextColorByStatus(status, 'textSubtle')} textAlign=\"center\">\r\n          {`#${epoch}`}\r\n        </Text>\r\n      </Round>\r\n    </StyledCardHeader>\r\n  )\r\n}\r\n\r\nexport default CardHeader\r\n","import React from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport styled from 'styled-components'\r\nimport { Flex, TrophyGoldIcon } from '@pancakeswap/uikit'\r\nimport { useBetCanClaim } from 'state/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport CollectWinningsButton from '../CollectWinningsButton'\r\n\r\ninterface CollectWinningsOverlayProps {\r\n  roundId: string\r\n  epoch: number\r\n  payout: number\r\n  isBottom?: boolean\r\n}\r\n\r\nconst Wrapper = styled(Flex)<{ isBottom: CollectWinningsOverlayProps['isBottom'] }>`\r\n  background-color: ${({ theme }) => theme.colors.secondary};\r\n  left: 0;\r\n  position: absolute;\r\n  width: 100%;\r\n  z-index: 30;\r\n\r\n  ${({ isBottom }) => {\r\n    return isBottom\r\n      ? `\r\n      border-radius: 0 0 16px 16px;\r\n      bottom: 0;\r\n    `\r\n      : `\r\n      top: 37px; // Card header height\r\n    `\r\n  }}\r\n`\r\n\r\nconst CollectWinningsOverlay: React.FC<CollectWinningsOverlayProps> = ({\r\n  roundId,\r\n  epoch,\r\n  payout,\r\n  isBottom = false,\r\n  ...props\r\n}) => {\r\n  const { account } = useWeb3React()\r\n  const { t } = useTranslation()\r\n  const canClaim = useBetCanClaim(account, roundId)\r\n\r\n  if (!canClaim) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Wrapper alignItems=\"center\" p=\"16px\" isBottom={isBottom} {...props}>\r\n      <TrophyGoldIcon width=\"64px\" style={{ flex: 'none' }} mr=\"8px\" />\r\n      <CollectWinningsButton payout={payout} roundId={roundId} epoch={epoch} hasClaimed={false} width=\"100%\">\r\n        {t('Collect Winnings')}\r\n      </CollectWinningsButton>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default CollectWinningsOverlay\r\n","import React from 'react'\r\nimport { CardBody, Text, Flex, BlockIcon, LinkExternal } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Round, BetPosition } from 'state/types'\r\nimport { useGetTotalIntervalBlocks } from 'state/hooks'\r\nimport ReclaimPositionButton from '../ReclaimPositionButton'\r\nimport useIsRefundable from '../../hooks/useIsRefundable'\r\nimport { RoundResultBox } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport Card from './Card'\r\nimport CardHeader from './CardHeader'\r\n\r\ninterface CanceledRoundCardProps {\r\n  round: Round\r\n}\r\n\r\nconst CanceledRoundCard: React.FC<CanceledRoundCardProps> = ({ round }) => {\r\n  const { t } = useTranslation()\r\n  const interval = useGetTotalIntervalBlocks()\r\n  const { isRefundable, setIsRefundable } = useIsRefundable(round.epoch)\r\n  const { epoch, startBlock } = round\r\n  const estimatedEndBlock = startBlock + interval\r\n\r\n  const handleSuccess = async () => {\r\n    setIsRefundable(false)\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader\r\n        status=\"canceled\"\r\n        icon={<BlockIcon mr=\"4px\" width=\"21px\" />}\r\n        title={t('Canceled')}\r\n        epoch={round.epoch}\r\n        blockNumber={estimatedEndBlock}\r\n      />\r\n      <CardBody p=\"16px\">\r\n        <MultiplierArrow isDisabled />\r\n        <RoundResultBox>\r\n          <Flex flexDirection=\"column\" alignItems=\"center\">\r\n            <Text bold color={isRefundable ? 'text' : 'textDisabled'}>\r\n              {t('Round Canceled')}\r\n            </Text>\r\n            {isRefundable && <ReclaimPositionButton epoch={epoch} onSuccess={handleSuccess} width=\"100%\" my=\"8px\" />}\r\n            <LinkExternal href=\"https://docs.pancakeswap.finance/products/prediction\" external>\r\n              {t('Learn More')}\r\n            </LinkExternal>\r\n          </Flex>\r\n        </RoundResultBox>\r\n        <MultiplierArrow betPosition={BetPosition.BEAR} isDisabled />\r\n      </CardBody>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default CanceledRoundCard\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Box, BlockIcon, CardBody } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Round, BetPosition } from 'state/types'\r\nimport { useGetBetByRoundId } from 'state/hooks'\r\nimport { RoundResult } from '../RoundResult'\r\nimport { getPayout } from '../../helpers'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport Card from './Card'\r\nimport CardHeader from './CardHeader'\r\nimport CollectWinningsOverlay from './CollectWinningsOverlay'\r\nimport CanceledRoundCard from './CanceledRoundCard'\r\n\r\ninterface ExpiredRoundCardProps {\r\n  round: Round\r\n  betAmount?: number\r\n  hasEnteredUp: boolean\r\n  hasEnteredDown: boolean\r\n  bullMultiplier: number\r\n  bearMultiplier: number\r\n}\r\n\r\nconst StyledExpiredRoundCard = styled(Card)`\r\n  opacity: 0.7;\r\n  transition: opacity 300ms;\r\n\r\n  &:hover {\r\n    opacity: 1;\r\n  }\r\n`\r\n\r\nconst ExpiredRoundCard: React.FC<ExpiredRoundCardProps> = ({\r\n  round,\r\n  betAmount,\r\n  hasEnteredUp,\r\n  hasEnteredDown,\r\n  bullMultiplier,\r\n  bearMultiplier,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const { id, epoch, endBlock, lockPrice, closePrice } = round\r\n  const betPosition = closePrice > lockPrice ? BetPosition.BULL : BetPosition.BEAR\r\n  const bet = useGetBetByRoundId(account, round.id)\r\n  const payout = getPayout(bet)\r\n\r\n  if (round.failed) {\r\n    return <CanceledRoundCard round={round} />\r\n  }\r\n\r\n  return (\r\n    <Box position=\"relative\">\r\n      <StyledExpiredRoundCard>\r\n        <CardHeader\r\n          status=\"expired\"\r\n          icon={<BlockIcon mr=\"4px\" width=\"21px\" color=\"textDisabled\" />}\r\n          title={t('Expired')}\r\n          blockNumber={endBlock}\r\n          epoch={round.epoch}\r\n        />\r\n        <CardBody p=\"16px\" style={{ position: 'relative' }}>\r\n          <MultiplierArrow\r\n            betAmount={betAmount}\r\n            multiplier={bullMultiplier}\r\n            isActive={betPosition === BetPosition.BULL}\r\n            hasEntered={hasEnteredUp}\r\n          />\r\n          <RoundResult round={round} />\r\n          <MultiplierArrow\r\n            betAmount={betAmount}\r\n            multiplier={bearMultiplier}\r\n            betPosition={BetPosition.BEAR}\r\n            isActive={betPosition === BetPosition.BEAR}\r\n            hasEntered={hasEnteredDown}\r\n          />\r\n        </CardBody>\r\n      </StyledExpiredRoundCard>\r\n      <CollectWinningsOverlay roundId={id} epoch={epoch} payout={payout} isBottom={hasEnteredDown} />\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default ExpiredRoundCard\r\n","import React from 'react'\r\nimport { Progress, ProgressProps } from '@pancakeswap/uikit'\r\nimport { useBlock } from 'state/hooks'\r\n\r\ninterface BlockProgressProps extends ProgressProps {\r\n  startBlock: number\r\n  endBlock: number\r\n}\r\n\r\nconst BlockProgress: React.FC<BlockProgressProps> = ({ startBlock, endBlock, ...props }) => {\r\n  const { currentBlock } = useBlock()\r\n  const rawProgress = ((currentBlock - startBlock) / (endBlock - startBlock)) * 100\r\n  const progress = rawProgress <= 100 ? rawProgress : 100\r\n\r\n  return <Progress primaryStep={progress} {...props} />\r\n}\r\n\r\nexport default BlockProgress\r\n","import React from 'react'\r\nimport { CardBody, Flex, Spinner, WaitIcon, TooltipText, useTooltip, InfoIcon } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Round, BetPosition } from 'state/types'\r\nimport { useGetTotalIntervalBlocks } from 'state/hooks'\r\nimport { RoundResultBox } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport Card from './Card'\r\nimport CardHeader from './CardHeader'\r\n\r\ninterface CalculatingCardProps {\r\n  round: Round\r\n}\r\n\r\nconst CalculatingCard: React.FC<CalculatingCardProps> = ({ round }) => {\r\n  const { t } = useTranslation()\r\n  const interval = useGetTotalIntervalBlocks()\r\n  const estimatedEndBlock = round.startBlock + interval\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    t('This round’s closing transaction has been submitted to the blockchain, and is waiting to be confirmed.'),\r\n    { placement: 'bottom' },\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <Card>\r\n        <CardHeader\r\n          status=\"calculating\"\r\n          icon={<WaitIcon mr=\"4px\" width=\"21px\" />}\r\n          title={t('Calculating')}\r\n          epoch={round.epoch}\r\n          blockNumber={estimatedEndBlock}\r\n        />\r\n        <CardBody p=\"16px\">\r\n          <MultiplierArrow isDisabled />\r\n          <RoundResultBox>\r\n            <Flex alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\">\r\n              <Spinner size={96} />\r\n              <Flex mt=\"8px\" ref={targetRef}>\r\n                <TooltipText>{t('Calculating')}</TooltipText>\r\n                <InfoIcon ml=\"4px\" />\r\n              </Flex>\r\n            </Flex>\r\n          </RoundResultBox>\r\n          <MultiplierArrow betPosition={BetPosition.BEAR} isDisabled />\r\n        </CardBody>\r\n      </Card>\r\n      {tooltipVisible && tooltip}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default CalculatingCard\r\n","import React, { useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useCountUp } from 'react-countup'\r\nimport { CardBody, Flex, PlayCircleOutlineIcon, Skeleton, Text, TooltipText, useTooltip } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Round, BetPosition } from 'state/types'\r\nimport { useBlock, useGetIntervalBlocks, useGetLastOraclePrice } from 'state/hooks'\r\nimport BlockProgress from 'components/BlockProgress'\r\nimport { formatUsd, getBubbleGumBackground } from '../../helpers'\r\nimport PositionTag from '../PositionTag'\r\nimport { RoundResultBox, LockPriceRow, PrizePoolRow } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport Card from './Card'\r\nimport CardHeader from './CardHeader'\r\nimport CanceledRoundCard from './CanceledRoundCard'\r\nimport CalculatingCard from './CalculatingCard'\r\n\r\ninterface LiveRoundCardProps {\r\n  round: Round\r\n  betAmount?: number\r\n  hasEnteredUp: boolean\r\n  hasEnteredDown: boolean\r\n  bullMultiplier: number\r\n  bearMultiplier: number\r\n}\r\n\r\nconst GradientBorder = styled.div`\r\n  background: linear-gradient(180deg, #53dee9 0%, #7645d9 100%);\r\n  border-radius: 16px;\r\n  padding: 1px;\r\n`\r\n\r\nconst GradientCard = styled(Card)`\r\n  background: ${({ theme }) => getBubbleGumBackground(theme)};\r\n`\r\n\r\nconst LiveRoundCard: React.FC<LiveRoundCardProps> = ({\r\n  round,\r\n  betAmount,\r\n  hasEnteredUp,\r\n  hasEnteredDown,\r\n  bullMultiplier,\r\n  bearMultiplier,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const { lockPrice, lockBlock, totalAmount } = round\r\n  const { currentBlock } = useBlock()\r\n  const totalInterval = useGetIntervalBlocks()\r\n  const price = useGetLastOraclePrice()\r\n  const isBull = price.gt(lockPrice)\r\n  const priceColor = isBull ? 'success' : 'failure'\r\n  const estimatedEndBlock = lockBlock + totalInterval\r\n  const priceDifference = price.minus(lockPrice).toNumber()\r\n  const { countUp, update } = useCountUp({\r\n    start: 0,\r\n    end: price.toNumber(),\r\n    duration: 1,\r\n    decimals: 3,\r\n  })\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(t('Last price from Chainlink Oracle'), {\r\n    placement: 'bottom',\r\n  })\r\n\r\n  useEffect(() => {\r\n    update(price.toNumber())\r\n  }, [price, update])\r\n\r\n  if (round.failed) {\r\n    return <CanceledRoundCard round={round} />\r\n  }\r\n\r\n  if (currentBlock > estimatedEndBlock) {\r\n    return <CalculatingCard round={round} />\r\n  }\r\n\r\n  return (\r\n    <GradientBorder>\r\n      <GradientCard>\r\n        <CardHeader\r\n          status=\"live\"\r\n          icon={<PlayCircleOutlineIcon mr=\"4px\" width=\"24px\" color=\"secondary\" />}\r\n          title={t('Live')}\r\n          epoch={round.epoch}\r\n          blockNumber={estimatedEndBlock}\r\n        />\r\n        <BlockProgress variant=\"flat\" scale=\"sm\" startBlock={lockBlock} endBlock={estimatedEndBlock} />\r\n        <CardBody p=\"16px\">\r\n          <MultiplierArrow\r\n            betAmount={betAmount}\r\n            multiplier={bullMultiplier}\r\n            hasEntered={hasEnteredUp}\r\n            isActive={isBull}\r\n          />\r\n          <RoundResultBox betPosition={isBull ? BetPosition.BULL : BetPosition.BEAR}>\r\n            <Text color=\"textSubtle\" fontSize=\"12px\" bold textTransform=\"uppercase\" mb=\"8px\">\r\n              {t('Last Price')}\r\n            </Text>\r\n            <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\" height=\"36px\">\r\n              <div ref={targetRef}>\r\n                <TooltipText bold color={priceColor} fontSize=\"24px\" style={{ minHeight: '36px' }}>\r\n                  {price.gt(0) ? `$${countUp}` : <Skeleton height=\"36px\" width=\"94px\" />}\r\n                </TooltipText>\r\n              </div>\r\n              <PositionTag betPosition={isBull ? BetPosition.BULL : BetPosition.BEAR}>\r\n                {formatUsd(priceDifference)}\r\n              </PositionTag>\r\n            </Flex>\r\n            {lockPrice && <LockPriceRow lockPrice={lockPrice} />}\r\n            <PrizePoolRow totalAmount={totalAmount} />\r\n          </RoundResultBox>\r\n          <MultiplierArrow\r\n            betAmount={betAmount}\r\n            multiplier={bearMultiplier}\r\n            betPosition={BetPosition.BEAR}\r\n            hasEntered={hasEnteredDown}\r\n            isActive={!isBull}\r\n          />\r\n        </CardBody>\r\n      </GradientCard>\r\n      {tooltipVisible && tooltip}\r\n    </GradientBorder>\r\n  )\r\n}\r\n\r\nexport default LiveRoundCard\r\n","import React, { ReactNode } from 'react'\r\nimport styled from 'styled-components'\r\n\r\ninterface CardFlipProps {\r\n  isFlipped: boolean\r\n  height: string\r\n  children: [ReactNode, ReactNode]\r\n}\r\n\r\nconst Front = styled.div`\r\n  align-items: center;\r\n  backface-visibility: hidden;\r\n  display: flex;\r\n  height: 100%;\r\n  left: 0;\r\n  position: absolute;\r\n  top: 0;\r\n  transition: z-index 600ms;\r\n  width: 100%;\r\n\r\n  & > div {\r\n    flex: 1;\r\n  }\r\n`\r\n\r\nconst Back = styled(Front)`\r\n  transform: rotateY(180deg);\r\n`\r\n\r\nconst Inner = styled.div<{ isFlipped: CardFlipProps['isFlipped'] }>`\r\n  height: 100%;\r\n  position: relative;\r\n  transform: rotateY(${({ isFlipped }) => (isFlipped ? 180 : 0)}deg);\r\n  transform-style: preserve-3d;\r\n  transition: transform 600ms;\r\n\r\n  ${Front} {\r\n    z-index: ${({ isFlipped }) => (isFlipped ? 5 : 10)};\r\n  }\r\n\r\n  ${Back} {\r\n    z-index: ${({ isFlipped }) => (isFlipped ? 10 : 5)};\r\n  }\r\n`\r\n\r\nconst StyledCardFlip = styled.div`\r\n  perspective: 1000px;\r\n  z-index: auto;\r\n`\r\n\r\nconst getComponents = (children: CardFlipProps['children']) => {\r\n  if (children.length !== 2) {\r\n    throw new Error('CardFlip: Two children are required')\r\n  }\r\n\r\n  return children\r\n}\r\n\r\nconst CardFlip: React.FC<CardFlipProps> = ({ isFlipped, height, children }) => {\r\n  const [front, back] = getComponents(children)\r\n\r\n  return (\r\n    <StyledCardFlip style={{ height }}>\r\n      <Inner isFlipped={isFlipped}>\r\n        <Front>{front}</Front>\r\n        <Back>{back}</Back>\r\n      </Inner>\r\n    </StyledCardFlip>\r\n  )\r\n}\r\n\r\nexport default CardFlip\r\n","import BigNumber from 'bignumber.js/bignumber'\r\nimport { BIG_TEN } from 'utils/bigNumber'\r\n\r\nBigNumber.config({\r\n  EXPONENTIAL_AT: 1000,\r\n  DECIMAL_PLACES: 80,\r\n})\r\n\r\nexport const BSC_BLOCK_TIME = 3\r\n\r\n// CAKE_PER_BLOCK details\r\n// 40 CAKE is minted per block\r\n// 20 CAKE per block is sent to Burn pool (A farm just for burning cake)\r\n// 10 CAKE per block goes to CAKE syrup pool\r\n// 10 CAKE per block goes to Yield farms and lottery\r\n// CAKE_PER_BLOCK in config/index.ts = 40 as we only change the amount sent to the burn pool which is effectively a farm.\r\n// CAKE/Block in src/views/Home/components/CakeStats.tsx = 20 (40 - Amount sent to burn pool)\r\n\r\nexport const CAKE_PER_BLOCK = new BigNumber(40)\r\nexport const BLOCKS_PER_YEAR = new BigNumber((60 / BSC_BLOCK_TIME) * 60 * 24 * 365) // 10512000\r\nexport const BASE_URL = 'https://pancakeswap.finance'\r\nexport const BASE_EXCHANGE_URL = 'https://exchange.pancakeswap.finance'\r\nexport const BASE_ADD_LIQUIDITY_URL = `${BASE_EXCHANGE_URL}/#/add`\r\nexport const BASE_LIQUIDITY_POOL_URL = `${BASE_EXCHANGE_URL}/#/pool`\r\nexport const BASE_BSC_SCAN_URL = 'https://bscscan.com'\r\nexport const LOTTERY_MAX_NUMBER_OF_TICKETS = 50\r\nexport const LOTTERY_TICKET_PRICE = 1\r\nexport const DEFAULT_TOKEN_DECIMAL = BIG_TEN.pow(18)\r\n","import { useContext } from 'react'\r\nimport { SwiperContext } from '../context/SwiperProvider'\r\n\r\nconst useSwiper = () => {\r\n  const swiperContext = useContext(SwiperContext)\r\n\r\n  if (swiperContext === undefined) {\r\n    throw new Error('Swiper not found')\r\n  }\r\n\r\n  return swiperContext\r\n}\r\n\r\nexport default useSwiper\r\n","import styled from 'styled-components'\r\nimport { Flex } from '@pancakeswap/uikit'\r\n\r\nconst FlexRow = styled(Flex).attrs({ alignItems: 'center' })`\r\n  flex: 1;\r\n`\r\n\r\nexport default FlexRow\r\n","import React, { useEffect, useState } from 'react'\r\nimport {\r\n  ArrowBackIcon,\r\n  CardBody,\r\n  CardHeader,\r\n  Flex,\r\n  Heading,\r\n  IconButton,\r\n  Button,\r\n  BinanceIcon,\r\n  Text,\r\n  BalanceInput,\r\n  Slider,\r\n  Box,\r\n  AutoRenewIcon,\r\n} from '@pancakeswap/uikit'\r\nimport BigNumber from 'bignumber.js'\r\nimport { DEFAULT_TOKEN_DECIMAL } from 'config'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useGetMinBetAmount } from 'state/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { usePredictionsContract } from 'hooks/useContract'\r\nimport { useGetBnbBalance } from 'hooks/useTokenBalance'\r\nimport useToast from 'hooks/useToast'\r\nimport { BetPosition } from 'state/types'\r\nimport { getDecimalAmount } from 'utils/formatBalance'\r\nimport UnlockButton from 'components/UnlockButton'\r\nimport PositionTag from '../PositionTag'\r\nimport { getBnbAmount } from '../../helpers'\r\nimport useSwiper from '../../hooks/useSwiper'\r\nimport FlexRow from '../FlexRow'\r\nimport Card from './Card'\r\n\r\ninterface SetPositionCardProps {\r\n  position: BetPosition\r\n  togglePosition: () => void\r\n  onBack: () => void\r\n  onSuccess: (decimalValue: BigNumber, hash: string) => Promise<void>\r\n}\r\n\r\nconst dust = new BigNumber(0.01).times(DEFAULT_TOKEN_DECIMAL)\r\nconst percentShortcuts = [10, 25, 50, 75]\r\n\r\nconst getPercentDisplay = (percentage: number) => {\r\n  if (Number.isNaN(percentage)) {\r\n    return ''\r\n  }\r\n\r\n  if (percentage > 100) {\r\n    return ''\r\n  }\r\n\r\n  if (percentage < 0) {\r\n    return ''\r\n  }\r\n\r\n  return `${percentage.toLocaleString(undefined, { maximumFractionDigits: 1 })}%`\r\n}\r\n\r\nconst getButtonProps = (value: BigNumber, bnbBalance: BigNumber, minBetAmountBalance: number) => {\r\n  if (bnbBalance.eq(0)) {\r\n    return { key: 'Insufficient BNB balance', disabled: true }\r\n  }\r\n\r\n  if (value.eq(0) || value.isNaN()) {\r\n    return { key: 'Enter an amount', disabled: true }\r\n  }\r\n  return { key: 'Confirm', disabled: value.lt(minBetAmountBalance) }\r\n}\r\n\r\nconst SetPositionCard: React.FC<SetPositionCardProps> = ({ position, togglePosition, onBack, onSuccess }) => {\r\n  const [value, setValue] = useState('')\r\n  const [isTxPending, setIsTxPending] = useState(false)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const { account } = useWeb3React()\r\n  const { swiper } = useSwiper()\r\n  const { balance: bnbBalance } = useGetBnbBalance()\r\n  const minBetAmount = useGetMinBetAmount()\r\n  const { t } = useTranslation()\r\n  const { toastError } = useToast()\r\n  const predictionsContract = usePredictionsContract()\r\n\r\n  const balanceDisplay = getBnbAmount(bnbBalance).toNumber()\r\n  const maxBalance = getBnbAmount(bnbBalance.gt(dust) ? bnbBalance.minus(dust) : bnbBalance).toNumber()\r\n  const valueAsBn = new BigNumber(value)\r\n\r\n  const percentageOfMaxBalance = valueAsBn.div(maxBalance).times(100).toNumber()\r\n  const percentageDisplay = getPercentDisplay(percentageOfMaxBalance)\r\n  const showFieldWarning = account && valueAsBn.gt(0) && errorMessage !== null\r\n  const minBetAmountBalance = getBnbAmount(minBetAmount).toNumber()\r\n\r\n  const handleChange = (input) => {\r\n    setValue(input)\r\n  }\r\n\r\n  const handleSliderChange = (newValue: number) => {\r\n    setValue(newValue.toString())\r\n  }\r\n\r\n  const setMax = () => {\r\n    setValue(maxBalance.toString())\r\n  }\r\n\r\n  // Clear value\r\n  const handleGoBack = () => {\r\n    setValue('')\r\n    onBack()\r\n  }\r\n\r\n  // Disable the swiper events to avoid conflicts\r\n  const handleMouseOver = () => {\r\n    swiper.keyboard.disable()\r\n    swiper.mousewheel.disable()\r\n    swiper.detachEvents()\r\n  }\r\n\r\n  const handleMouseOut = () => {\r\n    swiper.keyboard.enable()\r\n    swiper.mousewheel.enable()\r\n    swiper.attachEvents()\r\n  }\r\n\r\n  const { key, disabled } = getButtonProps(valueAsBn, bnbBalance, minBetAmountBalance)\r\n\r\n  const handleEnterPosition = () => {\r\n    const betMethod = position === BetPosition.BULL ? 'betBull' : 'betBear'\r\n    const decimalValue = getDecimalAmount(valueAsBn)\r\n\r\n    predictionsContract.methods[betMethod]()\r\n      .send({ from: account, value: decimalValue })\r\n      .once('sending', () => {\r\n        setIsTxPending(true)\r\n      })\r\n      .once('receipt', async (result) => {\r\n        setIsTxPending(false)\r\n        onSuccess(decimalValue, result.transactionHash as string)\r\n      })\r\n      .once('error', (error) => {\r\n        const errorMsg = t('An error occurred, unable to enter your position')\r\n\r\n        toastError(t('Error'), error?.message)\r\n        setIsTxPending(false)\r\n        console.error(errorMsg, error)\r\n      })\r\n  }\r\n\r\n  // Warnings\r\n  useEffect(() => {\r\n    const bnValue = new BigNumber(value)\r\n    const hasSufficientBalance = bnValue.gt(0) && bnValue.lte(maxBalance)\r\n\r\n    if (!hasSufficientBalance) {\r\n      setErrorMessage({ key: 'Insufficient BNB balance' })\r\n    } else if (bnValue.gt(0) && bnValue.lt(minBetAmountBalance)) {\r\n      setErrorMessage({\r\n        key: 'A minimum amount of %num% %token% is required',\r\n        data: { num: minBetAmountBalance, token: 'BNB' },\r\n      })\r\n    } else {\r\n      setErrorMessage(null)\r\n    }\r\n  }, [value, maxBalance, minBetAmountBalance, setErrorMessage])\r\n\r\n  return (\r\n    <Card onMouseOver={handleMouseOver} onMouseOut={handleMouseOut}>\r\n      <CardHeader p=\"16px\">\r\n        <Flex alignItems=\"center\">\r\n          <IconButton variant=\"text\" scale=\"sm\" onClick={handleGoBack} mr=\"8px\">\r\n            <ArrowBackIcon width=\"24px\" />\r\n          </IconButton>\r\n          <FlexRow>\r\n            <Heading scale=\"md\">{t('Set Position')}</Heading>\r\n          </FlexRow>\r\n          <PositionTag betPosition={position} onClick={togglePosition}>\r\n            {position === BetPosition.BULL ? t('Up') : t('Down')}\r\n          </PositionTag>\r\n        </Flex>\r\n      </CardHeader>\r\n      <CardBody py=\"16px\">\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n          <Text textAlign=\"right\" color=\"textSubtle\">\r\n            {t('Commit')}:\r\n          </Text>\r\n          <Flex alignItems=\"center\">\r\n            <BinanceIcon mr=\"4px  \" />\r\n            <Text bold textTransform=\"uppercase\">\r\n              BNB\r\n            </Text>\r\n          </Flex>\r\n        </Flex>\r\n        <BalanceInput\r\n          value={value}\r\n          onUserInput={handleChange}\r\n          isWarning={showFieldWarning}\r\n          inputProps={{ disabled: !account || isTxPending }}\r\n        />\r\n        {showFieldWarning && (\r\n          <Text color=\"failure\" fontSize=\"12px\" mt=\"4px\" textAlign=\"right\">\r\n            {t(errorMessage.key, errorMessage.data)}\r\n          </Text>\r\n        )}\r\n        <Text textAlign=\"right\" mb=\"16px\" color=\"textSubtle\" fontSize=\"12px\" style={{ height: '18px' }}>\r\n          {account && t('Balance: %balance%', { balance: balanceDisplay })}\r\n        </Text>\r\n        <Slider\r\n          name=\"balance\"\r\n          min={0}\r\n          max={maxBalance}\r\n          value={valueAsBn.lte(maxBalance) ? valueAsBn.toNumber() : 0}\r\n          onValueChanged={handleSliderChange}\r\n          step={0.000000000000001}\r\n          valueLabel={account ? percentageDisplay : ''}\r\n          disabled={!account || isTxPending}\r\n          mb=\"4px\"\r\n        />\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n          {percentShortcuts.map((percent) => {\r\n            const handleClick = () => {\r\n              setValue(((percent / 100) * maxBalance).toString())\r\n            }\r\n\r\n            return (\r\n              <Button\r\n                key={percent}\r\n                scale=\"xs\"\r\n                variant=\"tertiary\"\r\n                onClick={handleClick}\r\n                disabled={!account || isTxPending}\r\n                style={{ flex: 1 }}\r\n              >\r\n                {`${percent}%`}\r\n              </Button>\r\n            )\r\n          })}\r\n          <Button scale=\"xs\" variant=\"tertiary\" onClick={setMax} disabled={!account || isTxPending}>\r\n            {t('Max')}\r\n          </Button>\r\n        </Flex>\r\n        <Box mb=\"8px\">\r\n          {account ? (\r\n            <Button\r\n              width=\"100%\"\r\n              disabled={!account || disabled}\r\n              onClick={handleEnterPosition}\r\n              isLoading={isTxPending}\r\n              endIcon={isTxPending ? <AutoRenewIcon color=\"currentColor\" spin /> : null}\r\n            >\r\n              {t(key)}\r\n            </Button>\r\n          ) : (\r\n            <UnlockButton width=\"100%\" />\r\n          )}\r\n        </Box>\r\n        <Text as=\"p\" fontSize=\"12px\" lineHeight={1} color=\"textSubtle\">\r\n          {t('You won’t be able to remove or change your position once you enter it.')}\r\n        </Text>\r\n      </CardBody>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default SetPositionCard\r\n","import { useEffect, useState } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { getBep20Contract, getCakeContract } from 'utils/contractHelpers'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport useWeb3 from './useWeb3'\r\nimport useRefresh from './useRefresh'\r\nimport useLastUpdated from './useLastUpdated'\r\n\r\nconst useTokenBalance = (tokenAddress: string) => {\r\n  const [balance, setBalance] = useState(BIG_ZERO)\r\n  const { account } = useWeb3React()\r\n  const web3 = useWeb3()\r\n  const { fastRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      const contract = getBep20Contract(tokenAddress, web3)\r\n      const res = await contract.methods.balanceOf(account).call()\r\n      setBalance(new BigNumber(res))\r\n    }\r\n\r\n    if (account) {\r\n      fetchBalance()\r\n    }\r\n  }, [account, tokenAddress, web3, fastRefresh])\r\n\r\n  return balance\r\n}\r\n\r\nexport const useTotalSupply = () => {\r\n  const { slowRefresh } = useRefresh()\r\n  const [totalSupply, setTotalSupply] = useState<BigNumber>()\r\n\r\n  useEffect(() => {\r\n    async function fetchTotalSupply() {\r\n      const cakeContract = getCakeContract()\r\n      const supply = await cakeContract.methods.totalSupply().call()\r\n      setTotalSupply(new BigNumber(supply))\r\n    }\r\n\r\n    fetchTotalSupply()\r\n  }, [slowRefresh])\r\n\r\n  return totalSupply\r\n}\r\n\r\nexport const useBurnedBalance = (tokenAddress: string) => {\r\n  const [balance, setBalance] = useState(BIG_ZERO)\r\n  const { slowRefresh } = useRefresh()\r\n  const web3 = useWeb3()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      const contract = getBep20Contract(tokenAddress, web3)\r\n      const res = await contract.methods.balanceOf('0x000000000000000000000000000000000000dEaD').call()\r\n      setBalance(new BigNumber(res))\r\n    }\r\n\r\n    fetchBalance()\r\n  }, [web3, tokenAddress, slowRefresh])\r\n\r\n  return balance\r\n}\r\n\r\nexport const useGetBnbBalance = () => {\r\n  const [balance, setBalance] = useState(BIG_ZERO)\r\n  const { account } = useWeb3React()\r\n  const { lastUpdated, setLastUpdated } = useLastUpdated()\r\n  const web3 = useWeb3()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      const walletBalance = await web3.eth.getBalance(account)\r\n      setBalance(new BigNumber(walletBalance))\r\n    }\r\n\r\n    if (account) {\r\n      fetchBalance()\r\n    }\r\n  }, [account, web3, lastUpdated, setBalance])\r\n\r\n  return { balance, refresh: setLastUpdated }\r\n}\r\n\r\nexport default useTokenBalance\r\n","import React, { useState } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { CardBody, PlayCircleOutlineIcon, Button, useTooltip, ArrowUpIcon, ArrowDownIcon } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useAppDispatch } from 'state'\r\nimport { BetPosition, Round } from 'state/types'\r\nimport { useBlock, useGetIntervalBlocks } from 'state/hooks'\r\nimport { markPositionAsEntered } from 'state/predictions'\r\nimport useToast from 'hooks/useToast'\r\nimport CardFlip from '../CardFlip'\r\nimport { formatBnb, getBnbAmount } from '../../helpers'\r\nimport { RoundResultBox, PrizePoolRow } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport Card from './Card'\r\nimport CardHeader from './CardHeader'\r\nimport SetPositionCard from './SetPositionCard'\r\n\r\ninterface OpenRoundCardProps {\r\n  round: Round\r\n  betAmount?: number\r\n  hasEnteredUp: boolean\r\n  hasEnteredDown: boolean\r\n  bullMultiplier: number\r\n  bearMultiplier: number\r\n}\r\n\r\ninterface State {\r\n  isSettingPosition: boolean\r\n  position: BetPosition\r\n}\r\n\r\nconst OpenRoundCard: React.FC<OpenRoundCardProps> = ({\r\n  round,\r\n  betAmount,\r\n  hasEnteredUp,\r\n  hasEnteredDown,\r\n  bullMultiplier,\r\n  bearMultiplier,\r\n}) => {\r\n  const [state, setState] = useState<State>({\r\n    isSettingPosition: false,\r\n    position: BetPosition.BULL,\r\n  })\r\n  const { t } = useTranslation()\r\n  const interval = useGetIntervalBlocks()\r\n  const { toastSuccess } = useToast()\r\n  const { account } = useWeb3React()\r\n  const dispatch = useAppDispatch()\r\n  const { currentBlock } = useBlock()\r\n  const { isSettingPosition, position } = state\r\n  const isBufferPhase = currentBlock >= round.startBlock + interval\r\n  const positionDisplay = position === BetPosition.BULL ? t('Up').toUpperCase() : t('Down').toUpperCase()\r\n  const { targetRef, tooltipVisible, tooltip } = useTooltip(\r\n    <div style={{ whiteSpace: 'nowrap' }}>{`${formatBnb(betAmount)} BNB`}</div>,\r\n    { placement: 'top' },\r\n  )\r\n\r\n  // Bettable rounds do not have an lockBlock set so we approximate it by adding the block interval\r\n  // to the start block\r\n  const estimatedLockBlock = round.startBlock + interval\r\n\r\n  const getCanEnterPosition = () => {\r\n    if (hasEnteredUp || hasEnteredDown) {\r\n      return false\r\n    }\r\n\r\n    if (round.lockPrice !== null) {\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  const canEnterPosition = getCanEnterPosition()\r\n\r\n  const handleBack = () =>\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      isSettingPosition: false,\r\n    }))\r\n\r\n  const handleSetPosition = (newPosition: BetPosition) => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      isSettingPosition: true,\r\n      position: newPosition,\r\n    }))\r\n  }\r\n\r\n  const togglePosition = () => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      position: prevState.position === BetPosition.BULL ? BetPosition.BEAR : BetPosition.BULL,\r\n    }))\r\n  }\r\n\r\n  const handleSuccess = async (decimalValue: BigNumber, hash: string) => {\r\n    // Optimistically set the user bet so we see the entered position immediately.\r\n    dispatch(\r\n      markPositionAsEntered({\r\n        account,\r\n        roundId: round.id,\r\n        bet: {\r\n          hash,\r\n          round,\r\n          position,\r\n          amount: getBnbAmount(decimalValue).toNumber(),\r\n          claimed: false,\r\n        },\r\n      }),\r\n    )\r\n\r\n    handleBack()\r\n\r\n    toastSuccess(\r\n      t('Success!'),\r\n      t('%position% position entered', {\r\n        position: positionDisplay,\r\n      }),\r\n    )\r\n  }\r\n\r\n  const getPositionEnteredIcon = () => {\r\n    return position === BetPosition.BULL ? <ArrowUpIcon color=\"currentColor\" /> : <ArrowDownIcon color=\"currentColor\" />\r\n  }\r\n\r\n  return (\r\n    <CardFlip isFlipped={isSettingPosition} height=\"404px\">\r\n      <Card>\r\n        <CardHeader\r\n          status=\"next\"\r\n          epoch={round.epoch}\r\n          blockNumber={estimatedLockBlock}\r\n          icon={<PlayCircleOutlineIcon color=\"white\" mr=\"4px\" width=\"21px\" />}\r\n          title={t('Next')}\r\n        />\r\n        <CardBody p=\"16px\">\r\n          <MultiplierArrow betAmount={betAmount} multiplier={bullMultiplier} hasEntered={hasEnteredUp} />\r\n          <RoundResultBox isNext={canEnterPosition} isLive={!canEnterPosition}>\r\n            {canEnterPosition ? (\r\n              <>\r\n                <PrizePoolRow totalAmount={round.totalAmount} mb=\"8px\" />\r\n                <Button\r\n                  variant=\"success\"\r\n                  width=\"100%\"\r\n                  onClick={() => handleSetPosition(BetPosition.BULL)}\r\n                  mb=\"4px\"\r\n                  disabled={!canEnterPosition || isBufferPhase}\r\n                >\r\n                  {t('Enter UP')}\r\n                </Button>\r\n                <Button\r\n                  variant=\"danger\"\r\n                  width=\"100%\"\r\n                  onClick={() => handleSetPosition(BetPosition.BEAR)}\r\n                  disabled={!canEnterPosition || isBufferPhase}\r\n                >\r\n                  {t('Enter DOWN')}\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div ref={targetRef}>\r\n                  <Button disabled startIcon={getPositionEnteredIcon()} width=\"100%\" mb=\"8px\">\r\n                    {t('%position% Entered', { position: positionDisplay })}\r\n                  </Button>\r\n                </div>\r\n                <PrizePoolRow totalAmount={round.totalAmount} />\r\n                {tooltipVisible && tooltip}\r\n              </>\r\n            )}\r\n          </RoundResultBox>\r\n          <MultiplierArrow\r\n            betAmount={betAmount}\r\n            multiplier={bearMultiplier}\r\n            betPosition={BetPosition.BEAR}\r\n            hasEntered={hasEnteredDown}\r\n          />\r\n        </CardBody>\r\n      </Card>\r\n      <SetPositionCard\r\n        onBack={handleBack}\r\n        onSuccess={handleSuccess}\r\n        position={position}\r\n        togglePosition={togglePosition}\r\n      />\r\n    </CardFlip>\r\n  )\r\n}\r\n\r\nexport default OpenRoundCard\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { BSC_BLOCK_TIME } from 'config'\r\nimport { getWeb3NoAccount } from 'utils/web3'\r\n\r\n/**\r\n * Returns a countdown in seconds of a given block\r\n */\r\nconst useBlockCountdown = (blockNumber: number) => {\r\n  const timer = useRef<ReturnType<typeof setTimeout>>(null)\r\n  const [secondsRemaining, setSecondsRemaining] = useState(0)\r\n\r\n  useEffect(() => {\r\n    const startCountdown = async () => {\r\n      const web3 = getWeb3NoAccount()\r\n      const currentBlock = await web3.eth.getBlockNumber()\r\n\r\n      if (blockNumber > currentBlock) {\r\n        setSecondsRemaining((blockNumber - currentBlock) * BSC_BLOCK_TIME)\r\n\r\n        // Clear previous interval\r\n        if (timer.current) {\r\n          clearInterval(timer.current)\r\n        }\r\n\r\n        timer.current = setInterval(() => {\r\n          setSecondsRemaining((prevSecondsRemaining) => {\r\n            if (prevSecondsRemaining === 1) {\r\n              clearInterval(timer.current)\r\n            }\r\n\r\n            return prevSecondsRemaining - 1\r\n          })\r\n        }, 1000)\r\n      }\r\n    }\r\n\r\n    startCountdown()\r\n\r\n    return () => {\r\n      clearInterval(timer.current)\r\n    }\r\n  }, [setSecondsRemaining, blockNumber, timer])\r\n\r\n  return secondsRemaining\r\n}\r\n\r\nexport default useBlockCountdown\r\n","import { useGetCurrentRoundBlockNumber, useGetIntervalBlocks } from 'state/hooks'\r\nimport useBlockCountdown from 'hooks/useGetBlockCountdown'\r\n\r\n/**\r\n * Returns a countdown in seconds of a given block\r\n */\r\nconst useRoundCountdown = (intervalsToAdd = 1) => {\r\n  const interval = useGetIntervalBlocks()\r\n  const currentRoundBlockNum = useGetCurrentRoundBlockNumber()\r\n  const blocksToAdd = intervalsToAdd * interval\r\n  const seconds = useBlockCountdown(currentRoundBlockNum + blocksToAdd)\r\n\r\n  return seconds\r\n}\r\n\r\nexport default useRoundCountdown\r\n","import React from 'react'\r\nimport { CardBody, Text, WaitIcon } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Round, BetPosition } from 'state/types'\r\nimport { useGetCurrentEpoch, useGetTotalIntervalBlocks } from 'state/hooks'\r\nimport { formatRoundTime } from '../../helpers'\r\nimport useRoundCountdown from '../../hooks/useRoundCountdown'\r\nimport { RoundResultBox } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport Card from './Card'\r\nimport CardHeader from './CardHeader'\r\n\r\ninterface SoonRoundCardProps {\r\n  round: Round\r\n}\r\n\r\nconst SoonRoundCard: React.FC<SoonRoundCardProps> = ({ round }) => {\r\n  const { t } = useTranslation()\r\n  const interval = useGetTotalIntervalBlocks()\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const estimatedEndBlock = round.startBlock + interval\r\n  const seconds = useRoundCountdown(round.epoch - currentEpoch + 1)\r\n  const countdown = formatRoundTime(seconds)\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader\r\n        status=\"soon\"\r\n        icon={<WaitIcon mr=\"4px\" width=\"21px\" />}\r\n        title={t('Later')}\r\n        epoch={round.epoch}\r\n        blockNumber={estimatedEndBlock}\r\n      />\r\n      <CardBody p=\"16px\">\r\n        <MultiplierArrow isDisabled />\r\n        <RoundResultBox>\r\n          <Text textAlign=\"center\">\r\n            <Text bold>{t('Entry starts')}</Text>\r\n            <Text fontSize=\"24px\" bold>\r\n              {`~${countdown}`}\r\n            </Text>\r\n          </Text>\r\n        </RoundResultBox>\r\n        <MultiplierArrow betPosition={BetPosition.BEAR} isDisabled />\r\n      </CardBody>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default SoonRoundCard\r\n","import React from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useGetBetByRoundId, useGetCurrentEpoch } from 'state/hooks'\r\nimport { BetPosition, Round } from 'state/types'\r\nimport { getMultiplier } from '../../helpers'\r\nimport ExpiredRoundCard from './ExpiredRoundCard'\r\nimport LiveRoundCard from './LiveRoundCard'\r\nimport OpenRoundCard from './OpenRoundCard'\r\nimport SoonRoundCard from './SoonRoundCard'\r\n\r\ninterface RoundCardProps {\r\n  round: Round\r\n}\r\n\r\nconst RoundCard: React.FC<RoundCardProps> = ({ round }) => {\r\n  const { id, epoch, lockPrice, closePrice, totalAmount, bullAmount, bearAmount } = round\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const { account } = useWeb3React()\r\n  const bet = useGetBetByRoundId(account, id)\r\n  const hasEntered = bet !== null\r\n  const hasEnteredUp = hasEntered && bet.position === BetPosition.BULL\r\n  const hasEnteredDown = hasEntered && bet.position === BetPosition.BEAR\r\n  const bullMultiplier = getMultiplier(totalAmount, bullAmount)\r\n  const bearMultiplier = getMultiplier(totalAmount, bearAmount)\r\n\r\n  // Next (open) round\r\n  if (epoch === currentEpoch && lockPrice === null) {\r\n    return (\r\n      <OpenRoundCard\r\n        round={round}\r\n        hasEnteredDown={hasEnteredDown}\r\n        hasEnteredUp={hasEnteredUp}\r\n        betAmount={bet?.amount}\r\n        bullMultiplier={bullMultiplier}\r\n        bearMultiplier={bearMultiplier}\r\n      />\r\n    )\r\n  }\r\n\r\n  // Live round\r\n  if (closePrice === null && epoch === currentEpoch - 1) {\r\n    return (\r\n      <LiveRoundCard\r\n        betAmount={bet?.amount}\r\n        hasEnteredDown={hasEnteredDown}\r\n        hasEnteredUp={hasEnteredUp}\r\n        round={round}\r\n        bullMultiplier={bullMultiplier}\r\n        bearMultiplier={bearMultiplier}\r\n      />\r\n    )\r\n  }\r\n\r\n  // Fake future rounds\r\n  if (epoch > currentEpoch) {\r\n    return <SoonRoundCard round={round} />\r\n  }\r\n\r\n  // Past rounds\r\n  return (\r\n    <ExpiredRoundCard\r\n      round={round}\r\n      hasEnteredDown={hasEnteredDown}\r\n      hasEnteredUp={hasEnteredUp}\r\n      betAmount={bet?.amount}\r\n      bullMultiplier={bullMultiplier}\r\n      bearMultiplier={bearMultiplier}\r\n    />\r\n  )\r\n}\r\n\r\nexport default RoundCard\r\n","import React, { useEffect } from 'react'\r\nimport { useCountUp } from 'react-countup'\r\nimport styled from 'styled-components'\r\nimport { BnbUsdtPairTokenIcon, Box, Card, PocketWatchIcon, Text } from '@pancakeswap/uikit'\r\nimport { useGetLastOraclePrice } from 'state/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { formatRoundTime } from '../helpers'\r\nimport useRoundCountdown from '../hooks/useRoundCountdown'\r\n\r\nconst Token = styled(Box)`\r\n  margin-top: -24px;\r\n  position: absolute;\r\n  top: 50%;\r\n  z-index: 30;\r\n\r\n  & > svg {\r\n    height: 48px;\r\n    width: 48px;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    margin-top: -32px;\r\n\r\n    & > svg {\r\n      height: 64px;\r\n      width: 64px;\r\n    }\r\n  }\r\n`\r\n\r\nconst Title = styled(Text)`\r\n  font-size: 16px;\r\n  line-height: 21px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    font-size: 20px;\r\n    line-height: 22px;\r\n  }\r\n`\r\n\r\nconst Price = styled(Text)`\r\n  height: 18px;\r\n  justify-self: start;\r\n  width: 60px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    text-align: center;\r\n  }\r\n`\r\n\r\nconst Interval = styled(Text)`\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    text-align: center;\r\n    width: 32px;\r\n  }\r\n`\r\n\r\nconst Label = styled(Card)<{ dir: 'left' | 'right' }>`\r\n  align-items: ${({ dir }) => (dir === 'right' ? 'flex-end' : 'flex-start')};\r\n  border-radius: ${({ dir }) => (dir === 'right' ? '8px 8px 8px 24px' : '8px 8px 24px 8px')};\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: initial;\r\n  padding: ${({ dir }) => (dir === 'right' ? '0 28px 0 8px' : '0 8px 0 24px')};\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    align-items: center;\r\n    border-radius: 16px;\r\n    flex-direction: row;\r\n    padding: ${({ dir }) => (dir === 'right' ? '8px 40px 8px 8px' : '8px 8px 8px 40px')};\r\n  }\r\n`\r\n\r\nexport const PricePairLabel: React.FC = () => {\r\n  const price = useGetLastOraclePrice()\r\n  const { countUp, update } = useCountUp({\r\n    start: 0,\r\n    end: price.toNumber(),\r\n    duration: 1,\r\n    decimals: 3,\r\n  })\r\n\r\n  useEffect(() => {\r\n    update(price.toNumber())\r\n  }, [price, update])\r\n\r\n  return (\r\n    <Box pl=\"24px\" position=\"relative\" display=\"inline-block\">\r\n      <Token left={0}>\r\n        <BnbUsdtPairTokenIcon />\r\n      </Token>\r\n      <Label dir=\"left\">\r\n        <Title bold textTransform=\"uppercase\">\r\n          BNBUSDT\r\n        </Title>\r\n        <Price fontSize=\"12px\">{`$${countUp}`}</Price>\r\n      </Label>\r\n    </Box>\r\n  )\r\n}\r\n\r\ninterface TimerLabelProps {\r\n  interval: string\r\n}\r\n\r\nexport const TimerLabel: React.FC<TimerLabelProps> = ({ interval }) => {\r\n  const seconds = useRoundCountdown()\r\n  const countdown = formatRoundTime(seconds)\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Box pr=\"24px\" position=\"relative\">\r\n      <Label dir=\"right\">\r\n        <Title bold color=\"secondary\">\r\n          {seconds === 0 ? t('Closing') : countdown}\r\n        </Title>\r\n        <Interval fontSize=\"12px\">{interval}</Interval>\r\n      </Label>\r\n      <Token right={0}>\r\n        <PocketWatchIcon />\r\n      </Token>\r\n    </Box>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ArrowBackIcon, ArrowForwardIcon, BunnyCardsIcon, Card, IconButton } from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { useGetCurrentEpoch, useGetSortedRounds } from 'state/hooks'\r\nimport useSwiper from '../hooks/useSwiper'\r\n\r\nconst StyledPrevNextNav = styled(Card)`\r\n  align-items: center;\r\n  display: none;\r\n  justify-content: space-between;\r\n  overflow: initial;\r\n  position: relative;\r\n  width: 128px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    display: flex;\r\n  }\r\n`\r\n\r\nconst Icon = styled.div`\r\n  cursor: pointer;\r\n  left: 50%;\r\n  margin-left: -32px;\r\n  position: absolute;\r\n`\r\n\r\nconst PrevNextNav = () => {\r\n  const { swiper } = useSwiper()\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const rounds = useGetSortedRounds()\r\n\r\n  const handlePrevSlide = () => {\r\n    swiper.slidePrev()\r\n  }\r\n\r\n  const handleNextSlide = () => {\r\n    swiper.slideNext()\r\n  }\r\n\r\n  const handleSlideToLive = () => {\r\n    const currentEpochIndex = rounds.findIndex((round) => round.epoch === currentEpoch)\r\n\r\n    swiper.slideTo(currentEpochIndex - 1)\r\n    swiper.update()\r\n  }\r\n\r\n  return (\r\n    <StyledPrevNextNav>\r\n      <IconButton variant=\"text\" scale=\"sm\" onClick={handlePrevSlide}>\r\n        <ArrowBackIcon color=\"primary\" width=\"24px\" />\r\n      </IconButton>\r\n      <Icon onClick={handleSlideToLive}>\r\n        <BunnyCardsIcon width=\"64px\" />\r\n      </Icon>\r\n      <IconButton variant=\"text\" scale=\"sm\" onClick={handleNextSlide}>\r\n        <ArrowForwardIcon color=\"primary\" width=\"24px\" />\r\n      </IconButton>\r\n    </StyledPrevNextNav>\r\n  )\r\n}\r\n\r\nexport default PrevNextNav\r\n","import React from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { AutoRenewIcon, HistoryIcon, IconButton } from '@pancakeswap/uikit'\r\nimport { useAppDispatch } from 'state'\r\nimport { setHistoryPaneState } from 'state/predictions'\r\nimport { useGetIsFetchingHistory } from 'state/hooks'\r\n\r\nconst HistoryButton = () => {\r\n  const isFetchingHistory = useGetIsFetchingHistory()\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n\r\n  const handleClick = () => {\r\n    dispatch(setHistoryPaneState(true))\r\n  }\r\n\r\n  return (\r\n    <IconButton variant=\"subtle\" ml=\"8px\" onClick={handleClick} isLoading={isFetchingHistory} disabled={!account}>\r\n      {isFetchingHistory ? <AutoRenewIcon spin color=\"white\" /> : <HistoryIcon width=\"24px\" color=\"white\" />}\r\n    </IconButton>\r\n  )\r\n}\r\n\r\nexport default HistoryButton\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex, HelpIcon, IconButton } from '@pancakeswap/uikit'\r\nimport FlexRow from './FlexRow'\r\nimport { PricePairLabel, TimerLabel } from './Label'\r\nimport PrevNextNav from './PrevNextNav'\r\nimport HistoryButton from './HistoryButton'\r\n\r\nconst SetCol = styled.div`\r\n  flex: none;\r\n  width: auto;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    width: 270px;\r\n  }\r\n`\r\n\r\nconst HelpButtonWrapper = styled.div`\r\n  order: 1;\r\n  margin: 0 8px 0 0;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    order: 2;\r\n    margin: 0 0 0 8px;\r\n  }\r\n`\r\n\r\nconst TimerLabelWrapper = styled.div`\r\n  order: 2;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    order: 1;\r\n  }\r\n`\r\n\r\nconst HistoryButtonWrapper = styled.div`\r\n  display: none;\r\n  order: 3;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    display: initial;\r\n  }\r\n`\r\n\r\nconst Menu = () => {\r\n  return (\r\n    <FlexRow alignItems=\"center\" p=\"16px\">\r\n      <SetCol>\r\n        <PricePairLabel />\r\n      </SetCol>\r\n      <FlexRow justifyContent=\"center\">\r\n        <PrevNextNav />\r\n      </FlexRow>\r\n      <SetCol>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <TimerLabelWrapper>\r\n            <TimerLabel interval=\"5m\" />\r\n          </TimerLabelWrapper>\r\n          <HelpButtonWrapper>\r\n            <IconButton\r\n              variant=\"subtle\"\r\n              as=\"a\"\r\n              href=\"https://docs.pancakeswap.finance/products/prediction\"\r\n              target=\"_blank\"\r\n              rel=\"noreferrer noopener\"\r\n            >\r\n              <HelpIcon width=\"24px\" color=\"white\" />\r\n            </IconButton>\r\n          </HelpButtonWrapper>\r\n          <HistoryButtonWrapper>\r\n            <HistoryButton />\r\n          </HistoryButtonWrapper>\r\n        </Flex>\r\n      </SetCol>\r\n    </FlexRow>\r\n  )\r\n}\r\n\r\nexport default Menu\r\n","import { useEffect } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport usePreviousValue from 'hooks/usePreviousValue'\r\nimport { useAppDispatch } from 'state'\r\nimport { useGetCurrentEpoch, useGetSortedRounds } from 'state/hooks'\r\nimport { fetchCurrentBets } from 'state/predictions'\r\nimport useSwiper from './useSwiper'\r\n\r\n/**\r\n * Hooks for actions to be performed when the round changes\r\n */\r\nconst useOnNextRound = () => {\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const rounds = useGetSortedRounds()\r\n  const { account } = useWeb3React()\r\n  const previousEpoch = usePreviousValue(currentEpoch)\r\n  const { swiper } = useSwiper()\r\n  const dispatch = useAppDispatch()\r\n\r\n  useEffect(() => {\r\n    if (swiper && currentEpoch !== undefined && previousEpoch !== undefined && currentEpoch !== previousEpoch) {\r\n      const currentEpochIndex = rounds.findIndex((round) => round.epoch === currentEpoch)\r\n\r\n      // Fetch data on current unclaimed bets\r\n      dispatch(fetchCurrentBets({ account, roundIds: rounds.map((round) => round.id) }))\r\n\r\n      // Slide to the current LIVE round which is always the one before the current round\r\n      swiper.slideTo(currentEpochIndex - 1)\r\n      swiper.update()\r\n    }\r\n  }, [previousEpoch, currentEpoch, rounds, swiper, account, dispatch])\r\n}\r\n\r\nexport default useOnNextRound\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport SwiperCore, { Keyboard, Mousewheel } from 'swiper'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport { Box } from '@pancakeswap/uikit'\r\nimport { useGetSortedRounds } from 'state/hooks'\r\nimport 'swiper/swiper.min.css'\r\nimport RoundCard from './components/RoundCard'\r\nimport Menu from './components/Menu'\r\nimport useSwiper from './hooks/useSwiper'\r\nimport useOnNextRound from './hooks/useOnNextRound'\r\n\r\nSwiperCore.use([Keyboard, Mousewheel])\r\n\r\nconst StyledSwiper = styled.div`\r\n  .swiper-wrapper {\r\n    align-items: center;\r\n    display: flex;\r\n  }\r\n\r\n  .swiper-slide {\r\n    width: 320px;\r\n  }\r\n`\r\nconst Positions: React.FC = () => {\r\n  const { setSwiper } = useSwiper()\r\n  const rounds = useGetSortedRounds()\r\n  const initialIndex = Math.floor(rounds.length / 2)\r\n\r\n  useOnNextRound()\r\n\r\n  return (\r\n    <Box overflow=\"hidden\">\r\n      <Menu />\r\n      <StyledSwiper>\r\n        <Swiper\r\n          initialSlide={initialIndex}\r\n          onSwiper={setSwiper}\r\n          spaceBetween={16}\r\n          slidesPerView=\"auto\"\r\n          freeMode\r\n          freeModeSticky\r\n          centeredSlides\r\n          mousewheel\r\n          keyboard\r\n          resizeObserver\r\n        >\r\n          {rounds.map((round) => (\r\n            <SwiperSlide key={round.id}>\r\n              <RoundCard round={round} />\r\n            </SwiperSlide>\r\n          ))}\r\n        </Swiper>\r\n      </StyledSwiper>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default Positions\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Box, Flex } from '@pancakeswap/uikit'\r\nimport { useGetPredictionsStatus, useIsChartPaneOpen, useIsHistoryPaneOpen } from 'state/hooks'\r\nimport { PredictionStatus } from 'state/types'\r\nimport MobileMenu from './components/MobileMenu'\r\nimport History from './History'\r\nimport Positions from './Positions'\r\nimport Chart from './Chart'\r\nimport { ErrorNotification, PauseNotification } from './components/Notification'\r\n\r\nenum PageView {\r\n  POSITIONS = 'positions',\r\n  HISTORY = 'history',\r\n  CHART = 'chart',\r\n}\r\n\r\nconst StyledMobile = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  max-height: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.xl} {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst View = styled.div<{ isVisible: boolean }>`\r\n  height: 100%;\r\n  left: 0;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  visibility: ${({ isVisible }) => (isVisible ? 'visible' : 'hidden')};\r\n`\r\n\r\nconst getView = (isHistoryPaneOpen: boolean, isChartPaneOpen: boolean): PageView => {\r\n  if (isHistoryPaneOpen) {\r\n    return PageView.HISTORY\r\n  }\r\n\r\n  if (isChartPaneOpen) {\r\n    return PageView.CHART\r\n  }\r\n\r\n  return PageView.POSITIONS\r\n}\r\n\r\nconst Mobile: React.FC = () => {\r\n  const isHistoryPaneOpen = useIsHistoryPaneOpen()\r\n  const isChartPaneOpen = useIsChartPaneOpen()\r\n  const view = getView(isHistoryPaneOpen, isChartPaneOpen)\r\n  const status = useGetPredictionsStatus()\r\n\r\n  return (\r\n    <StyledMobile>\r\n      <Box height=\"100%\" overflow=\"hidden\" position=\"relative\">\r\n        <View isVisible={view === PageView.POSITIONS}>\r\n          <Flex alignItems=\"center\" height=\"100%\">\r\n            {status === PredictionStatus.ERROR && <ErrorNotification />}\r\n            {status === PredictionStatus.PAUSED && <PauseNotification />}\r\n            {status === PredictionStatus.LIVE && <Positions />}\r\n          </Flex>\r\n        </View>\r\n        <View isVisible={view === PageView.CHART}>\r\n          <Chart />\r\n        </View>\r\n        <View isVisible={view === PageView.HISTORY}>\r\n          <History />\r\n        </View>\r\n      </Box>\r\n      <MobileMenu />\r\n    </StyledMobile>\r\n  )\r\n}\r\n\r\nexport default Mobile\r\n","import React, { useEffect, useRef } from 'react'\r\nimport styled from 'styled-components'\r\nimport Split from 'split-grid'\r\nimport { ArrowDownIcon, Button, ChartIcon } from '@pancakeswap/uikit'\r\nimport debounce from 'lodash/debounce'\r\nimport delay from 'lodash/delay'\r\nimport { useAppDispatch } from 'state'\r\nimport { useGetPredictionsStatus, useIsChartPaneOpen, useIsHistoryPaneOpen } from 'state/hooks'\r\nimport { setChartPaneState } from 'state/predictions'\r\nimport { PredictionStatus } from 'state/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport TradingView from './components/TradingView'\r\nimport { ErrorNotification, PauseNotification } from './components/Notification'\r\nimport History from './History'\r\nimport Positions from './Positions'\r\n\r\n// The value to set the chart when the user clicks the chart tab at the bottom\r\nconst GRID_TEMPLATE_ROW = '1.2fr 12px .8fr'\r\n\r\nconst ExpandChartButton = styled(Button)`\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  border-bottom-left-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  bottom: 12px;\r\n  color: ${({ theme }) => theme.colors.text};\r\n  display: none;\r\n  left: 32px;\r\n  position: absolute;\r\n  z-index: 50;\r\n\r\n  &:hover:not(:disabled):not(.pancake-button--disabled):not(.pancake-button--disabled):not(:active) {\r\n    background-color: ${({ theme }) => theme.card.background};\r\n    opacity: 1;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    display: inline-flex;\r\n  }\r\n`\r\n\r\nconst SplitWrapper = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  grid-template-rows: 1fr 12px 0;\r\n  flex: 1;\r\n  overflow: hidden;\r\n`\r\n\r\nconst ChartPane = styled.div`\r\n  overflow: hidden;\r\n  position: relative;\r\n`\r\n\r\nconst HistoryPane = styled.div<{ isHistoryPaneOpen: boolean }>`\r\n  flex: none;\r\n  overflow: hidden;\r\n  transition: width 200ms ease-in-out;\r\n  width: ${({ isHistoryPaneOpen }) => (isHistoryPaneOpen ? '384px' : 0)};\r\n`\r\n\r\nconst StyledDesktop = styled.div`\r\n  display: none;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    display: flex;\r\n    height: 100%;\r\n  }\r\n`\r\n\r\nconst PositionPane = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  max-width: 100%;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n\r\n  & > div {\r\n    flex: 1;\r\n    overflow: hidden;\r\n  }\r\n`\r\n\r\nconst Gutter = styled.div`\r\n  background: ${({ theme }) => theme.colors.dropdown};\r\n  cursor: row-resize;\r\n  height: 12px;\r\n  position: relative;\r\n\r\n  &:before {\r\n    background-color: ${({ theme }) => theme.colors.textSubtle};\r\n    border-radius: 8px;\r\n    content: '';\r\n    height: 4px;\r\n    left: 50%;\r\n    margin-left: -32px;\r\n    position: absolute;\r\n    top: 4px;\r\n    width: 64px;\r\n  }\r\n`\r\n\r\nconst Desktop: React.FC = () => {\r\n  const splitWrapperRef = useRef<HTMLDivElement>()\r\n  const chartRef = useRef<HTMLDivElement>()\r\n  const gutterRef = useRef<HTMLDivElement>()\r\n  const isHistoryPaneOpen = useIsHistoryPaneOpen()\r\n  const isChartPaneOpen = useIsChartPaneOpen()\r\n  const dispatch = useAppDispatch()\r\n  const { t } = useTranslation()\r\n  const status = useGetPredictionsStatus()\r\n\r\n  const toggleChartPane = () => {\r\n    const newChartPaneState = !isChartPaneOpen\r\n\r\n    if (newChartPaneState) {\r\n      splitWrapperRef.current.style.transition = 'grid-template-rows 150ms'\r\n      splitWrapperRef.current.style.gridTemplateRows = GRID_TEMPLATE_ROW\r\n\r\n      // Purely comedic: We only want to animate if we are clicking the open chart button\r\n      // If we keep the transition on the resizing becomes very choppy\r\n      delay(() => {\r\n        splitWrapperRef.current.style.transition = ''\r\n      }, 150)\r\n    }\r\n\r\n    dispatch(setChartPaneState(newChartPaneState))\r\n  }\r\n\r\n  useEffect(() => {\r\n    const threshold = 100\r\n    const handleDrag = debounce(() => {\r\n      const { height } = chartRef.current.getBoundingClientRect()\r\n\r\n      // If the height of the chart pane goes below the \"snapOffset\" threshold mark the chart pane as closed\r\n      dispatch(setChartPaneState(height > threshold))\r\n    }, 50)\r\n\r\n    const split = Split({\r\n      dragInterval: 1,\r\n      snapOffset: threshold,\r\n      onDrag: handleDrag,\r\n      rowGutters: [\r\n        {\r\n          track: 1,\r\n          element: gutterRef.current,\r\n        },\r\n      ],\r\n    })\r\n\r\n    return () => {\r\n      split.destroy()\r\n    }\r\n  }, [gutterRef, chartRef, dispatch])\r\n\r\n  return (\r\n    <>\r\n      {!isChartPaneOpen && (\r\n        <ExpandChartButton\r\n          variant=\"tertiary\"\r\n          scale=\"sm\"\r\n          startIcon={isChartPaneOpen ? <ArrowDownIcon /> : <ChartIcon />}\r\n          onClick={toggleChartPane}\r\n        >\r\n          {isChartPaneOpen ? t('Close') : t('Charts')}\r\n        </ExpandChartButton>\r\n      )}\r\n      <StyledDesktop>\r\n        <SplitWrapper ref={splitWrapperRef}>\r\n          <PositionPane>\r\n            {status === PredictionStatus.ERROR && <ErrorNotification />}\r\n            {status === PredictionStatus.PAUSED && <PauseNotification />}\r\n            {status === PredictionStatus.LIVE && (\r\n              <div>\r\n                <Positions />\r\n              </div>\r\n            )}\r\n          </PositionPane>\r\n          <Gutter ref={gutterRef} />\r\n          <ChartPane ref={chartRef}>\r\n            <TradingView />\r\n          </ChartPane>\r\n        </SplitWrapper>\r\n        <HistoryPane isHistoryPaneOpen={isHistoryPaneOpen}>\r\n          <History />\r\n        </HistoryPane>\r\n      </StyledDesktop>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Desktop\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport {\r\n  ArrowBackIcon,\r\n  ArrowForwardIcon,\r\n  ButtonMenu,\r\n  ButtonMenuItem,\r\n  Cards,\r\n  ChartIcon,\r\n  HistoryIcon,\r\n  IconButton,\r\n} from '@pancakeswap/uikit'\r\nimport { useAppDispatch } from 'state'\r\nimport { PredictionStatus } from 'state/types'\r\nimport { useGetPredictionsStatus, useIsChartPaneOpen, useIsHistoryPaneOpen } from 'state/hooks'\r\nimport { setChartPaneState, setHistoryPaneState } from 'state/predictions'\r\nimport useSwiper from '../hooks/useSwiper'\r\n\r\nconst ButtonNav = styled.div`\r\n  flex: none;\r\n`\r\n\r\nconst TabNav = styled.div`\r\n  flex: 1;\r\n  text-align: center;\r\n`\r\n\r\nconst StyledMobileMenu = styled.div`\r\n  align-items: center;\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  display: flex;\r\n  flex: none;\r\n  height: 64px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst getActiveIndex = (isHistoryOpen: boolean, isChartOpen: boolean) => {\r\n  if (isHistoryOpen) {\r\n    return 2\r\n  }\r\n\r\n  if (isChartOpen) {\r\n    return 1\r\n  }\r\n\r\n  return 0\r\n}\r\n\r\nconst MobileMenu = () => {\r\n  const { swiper } = useSwiper()\r\n  const isHistoryOpen = useIsHistoryPaneOpen()\r\n  const isChartOpen = useIsChartPaneOpen()\r\n  const status = useGetPredictionsStatus()\r\n  const activeIndex = getActiveIndex(isHistoryOpen, isChartOpen)\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n\r\n  const handleItemClick = (index: number) => {\r\n    switch (index) {\r\n      case 2:\r\n        dispatch(setHistoryPaneState(true))\r\n        break\r\n      case 1:\r\n        dispatch(setChartPaneState(true))\r\n        dispatch(setHistoryPaneState(false))\r\n        break\r\n      case 0:\r\n      default:\r\n        dispatch(setHistoryPaneState(false))\r\n        dispatch(setChartPaneState(false))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <StyledMobileMenu>\r\n      <ButtonNav>\r\n        <IconButton variant=\"text\" onClick={() => swiper.slidePrev()} disabled={status !== PredictionStatus.LIVE}>\r\n          <ArrowBackIcon width=\"24px\" color=\"primary\" />\r\n        </IconButton>\r\n      </ButtonNav>\r\n      <TabNav>\r\n        <ButtonMenu activeIndex={activeIndex} scale=\"sm\" variant=\"subtle\" onItemClick={handleItemClick}>\r\n          <ButtonMenuItem>\r\n            <Cards color=\"currentColor\" />\r\n          </ButtonMenuItem>\r\n          <ButtonMenuItem>\r\n            <ChartIcon color=\"currentColor\" />\r\n          </ButtonMenuItem>\r\n          <ButtonMenuItem disabled={!account}>\r\n            <HistoryIcon color=\"currentColor\" />\r\n          </ButtonMenuItem>\r\n        </ButtonMenu>\r\n      </TabNav>\r\n      <ButtonNav>\r\n        <IconButton variant=\"text\" onClick={() => swiper.slideNext()} disabled={status !== PredictionStatus.LIVE}>\r\n          <ArrowForwardIcon width=\"24px\" color=\"primary\" />\r\n        </IconButton>\r\n      </ButtonNav>\r\n    </StyledMobileMenu>\r\n  )\r\n}\r\n\r\nexport default MobileMenu\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex } from '@pancakeswap/uikit'\r\nimport Menu from './components/Menu'\r\nimport TradingView from './components/TradingView'\r\n\r\nconst MenuWrapper = styled.div`\r\n  flex: none;\r\n`\r\n\r\nconst ChartWrapper = styled.div`\r\n  flex: 1;\r\n  height: 100%;\r\n`\r\n\r\nconst Chart = () => {\r\n  return (\r\n    <Flex flexDirection=\"column\" height=\"100%\">\r\n      <MenuWrapper>\r\n        <Menu />\r\n      </MenuWrapper>\r\n      <ChartWrapper>\r\n        <TradingView />\r\n      </ChartWrapper>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default Chart\r\n","import React, { useState } from 'react'\r\nimport {\r\n  ModalContainer,\r\n  ModalBody,\r\n  Text,\r\n  Button,\r\n  Flex,\r\n  InjectedModalProps,\r\n  Checkbox,\r\n  ModalHeader,\r\n  ModalTitle,\r\n  Heading,\r\n  Box,\r\n} from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\n\r\ninterface RiskDisclaimerProps extends InjectedModalProps {\r\n  onSuccess: () => void\r\n}\r\n\r\nconst GradientModalHeader = styled(ModalHeader)`\r\n  background: ${({ theme }) => theme.colors.gradients.bubblegum};\r\n  padding-bottom: 24px;\r\n  padding-top: 24px;\r\n`\r\n\r\nconst RiskDisclaimer: React.FC<RiskDisclaimerProps> = ({ onSuccess, onDismiss }) => {\r\n  const [acknowledgeRisk, setAcknowledgeRisk] = useState(false)\r\n  const [acknowledgeBeta, setAcknowledgeBeta] = useState(false)\r\n  const { t } = useTranslation()\r\n\r\n  const handleSetAcknowledgeRisk = () => {\r\n    setAcknowledgeRisk(!acknowledgeRisk)\r\n  }\r\n\r\n  const handleSetAcknowledgeBeta = () => {\r\n    setAcknowledgeBeta(!acknowledgeBeta)\r\n  }\r\n\r\n  const handleConfirm = () => {\r\n    onSuccess()\r\n    onDismiss()\r\n  }\r\n\r\n  return (\r\n    <ModalContainer title={t('Welcome!')} minWidth=\"320px\">\r\n      <GradientModalHeader>\r\n        <ModalTitle>\r\n          <Heading scale=\"lg\">{t('Welcome!')}</Heading>\r\n        </ModalTitle>\r\n      </GradientModalHeader>\r\n      <ModalBody p=\"24px\" maxWidth=\"400px\">\r\n        <Box maxHeight=\"300px\" overflowY=\"auto\">\r\n          <Heading as=\"h3\" mb=\"24px\">\r\n            {t('This Product is in beta.')}\r\n          </Heading>\r\n\r\n          <Text as=\"p\" color=\"textSubtle\" mb=\"24px\">\r\n            {t('Once you enter a position, you cannot cancel or adjust it.')}\r\n          </Text>\r\n\r\n          <label htmlFor=\"checkbox\" style={{ display: 'block', cursor: 'pointer', marginBottom: '24px' }}>\r\n            <Flex alignItems=\"center\">\r\n              <div style={{ flex: 'none' }}>\r\n                <Checkbox id=\"checkbox\" scale=\"sm\" checked={acknowledgeRisk} onChange={handleSetAcknowledgeRisk} />\r\n              </div>\r\n              <Text ml=\"8px\">\r\n                {t(\r\n                  'I understand that I am using this product at my own risk. Any losses incurred due to my actions are my own responsibility.',\r\n                )}\r\n              </Text>\r\n            </Flex>\r\n          </label>\r\n          <label htmlFor=\"checkbox1\" style={{ display: 'block', cursor: 'pointer', marginBottom: '24px' }}>\r\n            <Flex alignItems=\"center\">\r\n              <div style={{ flex: 'none' }}>\r\n                <Checkbox id=\"checkbox1\" scale=\"sm\" checked={acknowledgeBeta} onChange={handleSetAcknowledgeBeta} />\r\n              </div>\r\n              <Text ml=\"8px\">\r\n                {t('I understand that this product is still in beta. I am participating at my own risk')}\r\n              </Text>\r\n            </Flex>\r\n          </label>\r\n        </Box>\r\n        <Button width=\"100%\" onClick={handleConfirm} disabled={!acknowledgeRisk || !acknowledgeBeta}>\r\n          {t('Continue')}\r\n        </Button>\r\n      </ModalBody>\r\n    </ModalContainer>\r\n  )\r\n}\r\n\r\nexport default RiskDisclaimer\r\n","import React from 'react'\r\nimport { ModalContainer, ModalBody, Text, Button, InjectedModalProps, LinkExternal, Flex } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ninterface ChartDisclaimerProps extends InjectedModalProps {\r\n  onSuccess: () => void\r\n}\r\n\r\nconst ChartDisclaimer: React.FC<ChartDisclaimerProps> = ({ onSuccess, onDismiss }) => {\r\n  const { t } = useTranslation()\r\n\r\n  const handleConfirm = () => {\r\n    onSuccess()\r\n    onDismiss()\r\n  }\r\n\r\n  return (\r\n    <ModalContainer title={t('Welcome!')} minWidth=\"320px\">\r\n      <ModalBody p=\"24px\" maxWidth=\"400px\">\r\n        <Text as=\"p\" mb=\"16px\">\r\n          {t('Charts are provided for reference only, and do not reflect rounds’ final outcome.')}\r\n        </Text>\r\n        <Text as=\"p\" mb=\"16px\">\r\n          {t('Please refer to the prices shown on the cards for the final outcome.')}\r\n        </Text>\r\n        <Button width=\"100%\" onClick={handleConfirm} mb=\"16px\">\r\n          {t('I understand')}\r\n        </Button>\r\n        <Flex justifyContent=\"center\" alignItems=\"center\">\r\n          <LinkExternal\r\n            href=\"https://docs.pancakeswap.finance/products/prediction/prediction-faq#what-are-you-using-for-your-price-feed\"\r\n            external\r\n          >\r\n            {t('Learn More')}\r\n          </LinkExternal>\r\n        </Flex>\r\n      </ModalBody>\r\n    </ModalContainer>\r\n  )\r\n}\r\n\r\nexport default ChartDisclaimer\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Helmet } from 'react-helmet-async'\r\nimport { useMatchBreakpoints, useModal } from '@pancakeswap/uikit'\r\nimport { useAppDispatch } from 'state'\r\nimport { useGetPredictionsStatus, useInitialBlock, useIsChartPaneOpen } from 'state/hooks'\r\nimport {\r\n  getMarketData,\r\n  getStaticPredictionsData,\r\n  makeFutureRoundResponse,\r\n  makeRoundData,\r\n  transformRoundResponse,\r\n} from 'state/predictions/helpers'\r\nimport { fetchCurrentBets, initialize, setPredictionStatus } from 'state/predictions'\r\nimport { HistoryFilter, PredictionsState, PredictionStatus } from 'state/types'\r\nimport usePersistState from 'hooks/usePersistState'\r\nimport PageLoader from 'components/PageLoader'\r\nimport usePollOraclePrice from './hooks/usePollOraclePrice'\r\nimport usePollRoundData from './hooks/usePollRoundData'\r\nimport Container from './components/Container'\r\nimport CollectWinningsPopup from './components/CollectWinningsPopup'\r\nimport SwiperProvider from './context/SwiperProvider'\r\nimport Desktop from './Desktop'\r\nimport Mobile from './Mobile'\r\nimport RiskDisclaimer from './components/RiskDisclaimer'\r\nimport ChartDisclaimer from './components/ChartDisclaimer'\r\n\r\nconst FUTURE_ROUND_COUNT = 2 // the number of rounds in the future to show\r\n\r\nconst Predictions = () => {\r\n  const { isXl } = useMatchBreakpoints()\r\n  const [hasAcceptedRisk, setHasAcceptedRisk] = usePersistState(false, 'pancake_predictions_accepted_risk')\r\n  const [hasAcceptedChart, setHasAcceptedChart] = usePersistState(false, 'pancake_predictions_chart')\r\n  const { account } = useWeb3React()\r\n  const status = useGetPredictionsStatus()\r\n  const isChartPaneOpen = useIsChartPaneOpen()\r\n  const dispatch = useAppDispatch()\r\n  const initialBlock = useInitialBlock()\r\n  const isDesktop = isXl\r\n  const handleAcceptRiskSuccess = () => setHasAcceptedRisk(true)\r\n  const handleAcceptChart = () => setHasAcceptedChart(true)\r\n  const [onPresentRiskDisclaimer] = useModal(<RiskDisclaimer onSuccess={handleAcceptRiskSuccess} />, false)\r\n  const [onPresentChartDisclaimer] = useModal(<ChartDisclaimer onSuccess={handleAcceptChart} />, false)\r\n\r\n  // TODO: memoize modal's handlers\r\n  const onPresentRiskDisclaimerRef = useRef(onPresentRiskDisclaimer)\r\n  const onPresentChartDisclaimerRef = useRef(onPresentChartDisclaimer)\r\n\r\n  // Disclaimer\r\n  useEffect(() => {\r\n    if (!hasAcceptedRisk) {\r\n      onPresentRiskDisclaimerRef.current()\r\n    }\r\n  }, [hasAcceptedRisk, onPresentRiskDisclaimerRef])\r\n\r\n  // Chart Disclaimer\r\n  useEffect(() => {\r\n    if (!hasAcceptedChart && isChartPaneOpen) {\r\n      onPresentChartDisclaimerRef.current()\r\n    }\r\n  }, [onPresentChartDisclaimerRef, hasAcceptedChart, isChartPaneOpen])\r\n\r\n  useEffect(() => {\r\n    const fetchInitialData = async () => {\r\n      const [staticPredictionsData, marketData] = await Promise.all([getStaticPredictionsData(), getMarketData()])\r\n      const { currentEpoch, intervalBlocks, bufferBlocks } = staticPredictionsData\r\n      const latestRound = marketData.rounds.find((round) => round.epoch === currentEpoch)\r\n\r\n      // Fetch data on current unclaimed bets\r\n      dispatch(fetchCurrentBets({ account, roundIds: marketData.rounds.map((round) => round.id) }))\r\n\r\n      if (marketData.market.paused) {\r\n        dispatch(setPredictionStatus(PredictionStatus.PAUSED))\r\n      } else if (latestRound && latestRound.epoch === currentEpoch) {\r\n        const currentRoundStartBlock = Number(latestRound.startBlock)\r\n        const futureRounds = []\r\n        const halfInterval = (intervalBlocks + bufferBlocks) / 2\r\n\r\n        for (let i = 1; i <= FUTURE_ROUND_COUNT; i++) {\r\n          futureRounds.push(makeFutureRoundResponse(currentEpoch + i, (currentRoundStartBlock + halfInterval) * i))\r\n        }\r\n\r\n        const roundData = makeRoundData([...marketData.rounds, ...futureRounds.map(transformRoundResponse)])\r\n\r\n        dispatch(\r\n          initialize({\r\n            ...(staticPredictionsData as Omit<PredictionsState, 'rounds'>),\r\n            historyFilter: HistoryFilter.ALL,\r\n            currentRoundStartBlockNumber: currentRoundStartBlock,\r\n            rounds: roundData,\r\n            history: {},\r\n            bets: {},\r\n          }),\r\n        )\r\n      } else {\r\n        // If the latest epoch from the API does not match the latest epoch from the contract we have an unrecoverable error\r\n        dispatch(setPredictionStatus(PredictionStatus.ERROR))\r\n      }\r\n    }\r\n\r\n    // Do not start initialization until the first block has been retrieved\r\n    if (initialBlock > 0) {\r\n      fetchInitialData()\r\n    }\r\n  }, [initialBlock, dispatch, account])\r\n\r\n  usePollRoundData()\r\n  usePollOraclePrice()\r\n\r\n  if (status === PredictionStatus.INITIAL) {\r\n    return <PageLoader />\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <script src=\"https://s3.tradingview.com/tv.js\" type=\"text/javascript\" id=\"tradingViewWidget\" />\r\n      </Helmet>\r\n      <SwiperProvider>\r\n        <Container>\r\n          {isDesktop ? <Desktop /> : <Mobile />}\r\n          <CollectWinningsPopup />\r\n        </Container>\r\n      </SwiperProvider>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Predictions\r\n"],"sourceRoot":""}